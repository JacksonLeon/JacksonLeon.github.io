<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Hugo 0.81.0" />

  <title> Linux 基础 |  imlauzh</title>
  <meta name="description" content="A website built by Joseph Lau and host by Github pages.">
  <link rel="stylesheet" href="/blog/css/index.css">
  <link rel="stylesheet" href="/blog/css/classes.css">
  <link rel="canonical" href="/blog/posts/linux-foundations/">
  <link rel="alternate" type="application/rss+xml" href="" title="imlauzh">
  
  
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" rel="stylesheet">
  <link 
    rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" 
    integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" 
    crossorigin="anonymous">
  </link>
  <script 
    defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" 
    integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" 
    crossorigin="anonymous">
  </script>
  <script 
    defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" 
    integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" 
    crossorigin="anonymous" 
    onload="renderMathInElement(document.body);">
  </script>
</head>

<body>
  <header class="menus">
  

  <nav >
    
    <a href="/blog/"> Home</a>
    
    <a href="/blog/categories/"> Categories</a>
    
    <a href="/blog/tags/"> Tags</a>
    
    <a href="/blog/about/"> About</a>
    
    <a href="/blog/index.xml"> Subscribe</a>
    
  </nav>

  <nav class="fontawesome">
    
    <a href="https://github.com/imlauzh" target="_blank">
        <i title="GitHub" class="fab fa-github"></i>
    </a>
    
    
    <a href="/blog/index.xml" target="_blank">
        <i title="RSS" class="fas fa-rss"></i>
    </a>
    
  </nav>
  
  
  <div class="hidden description">A website built by Joseph Lau and host by Github pages.</div>
  
</header>

<article id="article">
  <header>
  
    <i class="fas fa-folder"></i>
    
    <a href="/blog/categories/notebook">Notebook</a>
    &nbsp;
    
    <a href="/blog/categories/linux">Linux</a>
    &nbsp;
    
  

    <h1 style="text-align: center;" >Linux 基础</h1>
    <div class="post-meta">
    
      <time datetime="2019-10-20T19:50:00Z">October 20, 2019</time> &nbsp; 
    

     &nbsp;

    
    
      <i class="far fa-eye"></i>
      <span id="/blog/posts/linux-foundations/" class="leancloud_visitors" data-flag-title="Linux 基础">
          <span class="leancloud-visitors-count">  </span>
      </span> &nbsp;
    
    

    
      <i class="far fa-clock"></i>
      
      
      

      
        4 min
      
      39 s
      &nbsp;
    
    </div>
  </header>

  <h2 id="zsh">zsh</h2>
<pre><code>sudo yum -y install zsh
chsh -s /bin/zsh
# curl
sh -c &quot;$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot;
# wget
sh -c &quot;$(wget https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)&quot;
ls ~/.oh-my-zsh/themes
vim ~/.zshrc
ZSH_THEME=&quot;ys&quot;
source ~/.zshrc

# 命令补全
git clone https://github.com/zsh-users/zsh-autosuggestions $ZSH_CUSTOM/plugins/zsh-autosuggestions
vim ~/.zshrc
plugins=(
  git
  zsh-autosuggestions
)
source ~/.zshrc
</code></pre><h2 id="docker">Docker</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># centos</span>
sudo yum remove docker <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>                  docker-client <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>                  docker-client-latest <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>                  docker-common <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>                  docker-latest <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>                  docker-latest-logrotate <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>                  docker-logrotate <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>                  docker-engine
sudo yum install -y yum-utils <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  device-mapper-persistent-data <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  lvm2
sudo yum-config-manager <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --add-repo <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    https://download.docker.com/linux/centos/docker-ce.repo
sudo yum install docker-ce docker-ce-cli containerd.io
sudo systemctl start docker
sudo docker run hello-world
</code></pre></div><h3 id="nvidia-docker">NVIDIA-DOCKER</h3>
<h4 id="centos-7-docker-ce-rhel-7475-docker-ce">CentOS 7 (docker-ce), RHEL 7.4/7.5 (docker-ce)</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># If you have nvidia-docker 1.0 installed: we need to remove it and all existing GPU containers</span>
docker volume ls -q -f driver<span style="color:#f92672">=</span>nvidia-docker | xargs -r -I<span style="color:#f92672">{}</span> -n1 docker ps -q -a -f volume<span style="color:#f92672">={}</span> | xargs -r docker rm -f
sudo yum remove nvidia-docker

<span style="color:#75715e"># Add the package repositories</span>
distribution<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>. /etc/os-release;echo $ID$VERSION_ID<span style="color:#66d9ef">)</span>
curl -s -L https://nvidia.github.io/nvidia-docker/$distribution/nvidia-docker.repo | <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  sudo tee /etc/yum.repos.d/nvidia-docker.repo

<span style="color:#75715e"># Install nvidia-docker2 and reload the Docker daemon configuration</span>
sudo yum install -y nvidia-docker2
sudo pkill -SIGHUP dockerd

<span style="color:#75715e"># Test nvidia-smi with the latest official CUDA image</span>
docker run --runtime<span style="color:#f92672">=</span>nvidia --rm nvidia/cuda:9.0-base nvidia-smi
</code></pre></div><h4 id="ubuntu-140416041804-debian-jessiestretch">Ubuntu 14.04/16.04/18.04, Debian Jessie/Stretch</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># If you have nvidia-docker 1.0 installed: we need to remove it and all existing GPU containers</span>
docker volume ls -q -f driver<span style="color:#f92672">=</span>nvidia-docker | xargs -r -I<span style="color:#f92672">{}</span> -n1 docker ps -q -a -f volume<span style="color:#f92672">={}</span> | xargs -r docker rm -f
sudo apt-get purge -y nvidia-docker

<span style="color:#75715e"># Add the package repositories</span>
curl -s -L https://nvidia.github.io/nvidia-docker/gpgkey | <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  sudo apt-key add -
distribution<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>. /etc/os-release;echo $ID$VERSION_ID<span style="color:#66d9ef">)</span>
curl -s -L https://nvidia.github.io/nvidia-docker/$distribution/nvidia-docker.list | <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  sudo tee /etc/apt/sources.list.d/nvidia-docker.list
sudo apt-get update

<span style="color:#75715e"># Install nvidia-docker2 and reload the Docker daemon configuration</span>
sudo apt-get install -y nvidia-docker2
sudo pkill -SIGHUP dockerd

<span style="color:#75715e"># Test nvidia-smi with the latest official CUDA image</span>
docker run --runtime<span style="color:#f92672">=</span>nvidia --rm nvidia/cuda:9.0-base nvidia-smi
</code></pre></div><h2 id="alias">alias</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">alias pytorch-py36<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;nvidia-docker run -it -p 8888:8888 --ipc=host -v /home/liuzh/projects/:/nlp --name pytorch-py36 ufoym/deepo:pytorch-py36-cu100&#39;</span>
alias l<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ls -alF&#39;</span>
alias pg<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ps -aux | grep&#39;</span>
alias wg<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;watch --color -n1 gpustat -cpu&#39;</span>
alias pi<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pip install --user -i https://pypi.tuna.tsinghua.edu.cn/simple&#39;</span>
alias pi<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pip install -i https://pypi.tuna.tsinghua.edu.cn/simple&#39;</span>
</code></pre></div><h2 id="使用ssh-key免密码登录">使用ssh key免密码登录</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#75715e"># linux</span>
$ chmod <span style="color:#ae81ff">600</span> .ssh/authorized_keys
<span style="color:#75715e"># user-vscode</span>
Host alias
    HostName ip
    User user
    IdentityFile C:<span style="color:#ae81ff">\U</span>sers<span style="color:#ae81ff">\L</span>au<span style="color:#ae81ff">\.</span>ssh<span style="color:#ae81ff">\i</span>d_rsa  <span style="color:#75715e">#private key location</span>
    Port <span style="color:#ae81ff">80</span>
    ConnectTimeout <span style="color:#ae81ff">60</span>
    <span style="color:#75715e"># windows</span>
    ProxyCommand C:<span style="color:#ae81ff">\P</span>rogram Files <span style="color:#f92672">(</span>x86<span style="color:#f92672">)</span><span style="color:#ae81ff">\N</span>map<span style="color:#ae81ff">\n</span>cat.exe --proxy-type socks5 --proxy ip:port %h %p
    <span style="color:#75715e"># linux</span>
    ProxyCommand nc -X <span style="color:#ae81ff">5</span> -x ip:port %h %p
</code></pre></div><h2 id="其他">其他</h2>
<h3 id="apt换源">apt换源</h3>
<p>首先看你的版本<code>lsb_release -a</code></p>
<pre><code>No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 16.04.4 LTS
Release:        16.04
Codename:       xenial
</code></pre><p>根据你的codename进行选择源，备份并编辑<code>/etc/apt/sources.list</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">cp sources.list sources.list.bak
vim source.list
<span style="color:#75715e"># 清华大学源</span>
deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial main restricted
deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-updates main restricted
deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial universe
deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-updates universe
deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial multiverse
deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-updates multiverse
deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-backports main restricted universe multiverse
deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-security main restricted
deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-security universe deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-security multiverse
apt-get update
</code></pre></div><ul>
<li>双系统切换后时间不一致</li>
</ul>
<blockquote>
<p>原因</p>
<p>Windows和Ubuntu在默认情况下看待硬件时间（主板上的BOIS显示的时间）的方式不一样</p>
<ul>
<li>Windows把系统硬件时间当作本地时间（Local time），即操作系统中显示的时间跟BIOS中显示的时间是一样的.</li>
<li>Linux/Unix/Mac把硬件时间当作UTC（Universal Time Coordinated,协调世界时），操作系统中显示的时间是硬件时间经过换算得来.</li>
</ul>
</blockquote>
<p>解决方案</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#75715e"># 更改Windows</span>
<span style="color:#75715e"># 如果要让Windows把硬件时间当作UTC</span>
<span style="color:#75715e"># 在CMD窗口（快捷键Win+R，输入cmd，回车）中输入如下命令，可以快速编辑注册表</span>
Reg add HKLM<span style="color:#ae81ff">\S</span>YSTEM<span style="color:#ae81ff">\C</span>urrentControlSet<span style="color:#ae81ff">\C</span>ontrol<span style="color:#ae81ff">\T</span>imeZoneInformation /v RealTimeIsUniversal /t REG_DWORD /d <span style="color:#ae81ff">1</span>
<span style="color:#75715e"># 或者直接编辑注册表，打开注册表编辑器（快捷键Win+R，输入regedit，回车），并找到一下目录位置</span>
<span style="color:#75715e"># 添加一项类型为REG_DWORD的键值，命名为RealTimeIsUniversal，值为1，重启后时间即回复正常</span>
HKEY_LOCAL_MACHINE/SYSTEM/CurrentControlSet/Control/TimeZoneInformation/
</code></pre></div><pre><code># 查看当前文件夹下文件夹大小
du -h --max-depth=1
# 查看Linux内核版本命令
cat /proc/version
uname -a
# 查看Linux系统版本的命令
lsb_release -a
cat /etc/redhat-release ## 这种方法只适合Redhat系的Linux
cat /etc/issue
</code></pre>

  
  <footer>
    <hr>
    
    <time datetime="2019-10-30T19:50:00Z">
      update @ October 30, 2019
    </time>
    <p></p>
    
    <div class="post-tags">
    
    </div>
  </footer>
  

  


  <div class="comments">



  <div class="comments-item" >
    
    
    
    <div id="vcomments"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <script type="text/javascript">
      new Valine({
          el: '#vcomments',
          highlight: false,
          lang: "en",
          appId: "O9aoAtFO2Mk0VrPqbyHMHwah-gzGzoHsz",
          appKey: "1bF6m0SPiN3sk9TaGxPELdjY",
          placeholder: "Say Something......",
          requiredFields: ["nick","mail"],
          avatar: "robohash",
          visitor:  true ,
          recordIP: true
      });
    </script>
    <script>
      if(window.location.hash){
          var checkExist = setInterval(function() {
             if ($(window.location.hash).length) {
                $('html, body, article').animate({scrollTop: $(window.location.hash).offset().top-90}, 1000);
                clearInterval(checkExist);
             }
          }, 100);
      }
    </script>
  </div>

</div>

</article>



  
  
  
</body>
<div class="foot">
  
  
    &copy; 2017 - 2021 &#183; 
    <a href="/">imlauzh</a> · Theme <a href="https://github.com/RainerChiang/simpleness">Simpleness</a> Powered by <a href="https://gohugo.io/">Hugo</a> &#183;
    <a href="#"><i class="fas fa-chevron-up"></i></a>
  

  
</div>

<script src="/blog/js/lazyload.min.js"></script>
<script>
  var lazyImage = new LazyLoad({
    container: document.getElementById('article')
  });
</script>


</html>
