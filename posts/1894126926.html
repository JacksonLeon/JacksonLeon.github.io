<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">























  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  

  
    
      
    

    
  

  
    
    
    <link rel="stylesheet" href="https://fonts.css.network//css?family=Lato:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Monaco:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext">
  






<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=6.7.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/icon32.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/icon16.png?v=6.7.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.7.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.7.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":true,"scrollpercent":true,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Google Python Style Guide To be translated   Google Python Style Guide 待翻译">
<meta name="keywords" content="Python,Reproduce">
<meta property="og:type" content="article">
<meta property="og:title" content="Google Python Style Guide">
<meta property="og:url" content="https://jacksonleon.gitee.io/posts/1894126926.html">
<meta property="og:site_name" content="GeekJoe">
<meta property="og:description" content="Google Python Style Guide To be translated   Google Python Style Guide 待翻译">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-04-30T12:37:51.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Google Python Style Guide">
<meta name="twitter:description" content="Google Python Style Guide To be translated   Google Python Style Guide 待翻译">



  <link rel="alternate" href="/atom.xml" title="GeekJoe" type="application/atom+xml">




  <link rel="canonical" href="https://jacksonleon.gitee.io/posts/1894126926.html">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Google Python Style Guide | GeekJoe</title>
  




  <script async src="//www.googletagmanager.com/gtag/js?id=UA-133178853-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-133178853-1');
  </script>









  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
    <a href="https://github.com/JacksonLeon" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">GeekJoe</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">步子大了容易扯着蛋</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-notes">

    
    
    
      
    

    

    <a href="/notes/" rel="section"><i class="menu-item-icon fa fa-fw fa-book"></i> <br>札记</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-friends">

    
    
    
      
    

    

    <a href="/friends/" rel="section"><i class="menu-item-icon fa fa-fw fa-address-book"></i> <br>友人帐</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jacksonleon.gitee.io/posts/1894126926.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Joseph">
      <meta itemprop="description" content="Love what you do, do what you love.">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="GeekJoe">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Google Python Style Guide

              
            
          </h1>
        

        <div class="post-meta">
          
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-04-30 20:37:51" itemprop="dateCreated datePublished" datetime="2019-04-30T20:37:51+08:00">2019-04-30</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Python/Style-Guide/" itemprop="url" rel="index"><span itemprop="name">Style Guide</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <a href="/posts/1894126926.html#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/posts/1894126926.html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="post-meta-item-icon">
            <i class="fa fa-eye"></i>
             阅读次数： 
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">71k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">1:05</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Google-Python-Style-Guide"><a href="#Google-Python-Style-Guide" class="headerlink" title="Google Python Style Guide"></a>Google Python Style Guide</h1><ul>
<li>To be translated</li>
</ul>
<blockquote>
<p>Google Python Style Guide</p>
<p>待翻译</p>
</blockquote>
<a id="more"></a>
<p><a id="background"></a></p>
<h2 id="1-Background"><a href="#1-Background" class="headerlink" title="1 Background"></a>1 Background</h2><p>Python is the main dynamic language used at Google. This style guide is a list<br>of <em>dos and don’ts</em> for Python programs.</p>
<p>To help you format code correctly, we’ve created a <a href="google_python_style.vim">settings file for<br>Vim</a>. For Emacs, the default settings should be fine.</p>
<p>Many teams use the <a href="https://github.com/google/yapf/" target="_blank" rel="noopener">yapf</a><br>auto-formatter to avoid arguing over formatting.</p>
<p><a id="s2-python-language-rules">&lt;/a&gt;<br><a id="python-language-rules"></a></a></p>
<h2 id="2-Python-Language-Rules"><a href="#2-Python-Language-Rules" class="headerlink" title="2 Python Language Rules"></a>2 Python Language Rules</h2><p><a id="s2.1-lint">&lt;/a&gt;<br><a id="lint"></a></a></p>
<h3 id="2-1-Lint"><a href="#2-1-Lint" class="headerlink" title="2.1 Lint"></a>2.1 Lint</h3><p>Run <code>pylint</code> over your code.</p>
<p><a id="s2.1.1-definition"></a></p>
<h4 id="2-1-1-Definition"><a href="#2-1-1-Definition" class="headerlink" title="2.1.1 Definition"></a>2.1.1 Definition</h4><p><code>pylint</code> is a tool for finding bugs and style problems in Python source<br>code. It finds problems that are typically caught by a compiler for less dynamic<br>languages like C and C++. Because of the dynamic nature of Python, some<br>warnings may be incorrect; however, spurious warnings should be fairly<br>infrequent.</p>
<p><a id="s2.1.2-pros"></a></p>
<h4 id="2-1-2-Pros"><a href="#2-1-2-Pros" class="headerlink" title="2.1.2 Pros"></a>2.1.2 Pros</h4><p>Catches easy-to-miss errors like typos, using-vars-before-assignment, etc.</p>
<p><a id="s2.1.3-cons"></a></p>
<h4 id="2-1-3-Cons"><a href="#2-1-3-Cons" class="headerlink" title="2.1.3 Cons"></a>2.1.3 Cons</h4><p><code>pylint</code> isn’t perfect. To take advantage of it, we’ll need to sometimes: a)<br>Write around it b) Suppress its warnings or c) Improve it.</p>
<p><a id="s2.1.4-decision"></a></p>
<h4 id="2-1-4-Decision"><a href="#2-1-4-Decision" class="headerlink" title="2.1.4 Decision"></a>2.1.4 Decision</h4><p>Make sure you run <code>pylint</code> on your code.</p>
<p>Suppress warnings if they are inappropriate so that other issues are not hidden.<br>To suppress warnings, you can set a line-level comment:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dict = <span class="string">'something awful'</span>  <span class="comment"># Bad Idea... pylint: disable=redefined-builtin</span></span><br></pre></td></tr></table></figure>
<p><code>pylint</code> warnings are each identified by symbolic name (<code>empty-docstring</code>)<br>Google-specific warnings start with <code>g-</code>.</p>
<p>If the reason for the suppression is not clear from the symbolic name, add an<br>explanation.</p>
<p>Suppressing in this way has the advantage that we can easily search for<br>suppressions and revisit them.</p>
<p>You can get a list of <code>pylint</code> warnings by doing:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pylint --list-msgs</span><br></pre></td></tr></table></figure>
<p>To get more information on a particular message, use:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pylint --help-msg=C6409</span><br></pre></td></tr></table></figure>
<p>Prefer <code>pylint: disable</code> to the deprecated older form <code>pylint: disable-msg</code>.</p>
<p>Unused argument warnings can be suppressed by deleting the variables at the<br>beginning of the function. Always include a comment explaining why you are<br>deleting it. “Unused.” is sufficient. For example:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">viking_cafe_order</span><span class="params">(spam, beans, eggs=None)</span>:</span></span><br><span class="line">    <span class="keyword">del</span> beans, eggs  <span class="comment"># Unused by vikings.</span></span><br><span class="line">    <span class="keyword">return</span> spam + spam + spam</span><br></pre></td></tr></table></figure>
<p>Other common forms of suppressing this warning include using ‘<code>_</code>‘ as the<br>identifier for the unused argument, prefixing the argument name with<br>‘<code>unused_</code>‘, or assigning them to ‘<code>_</code>‘. These forms are allowed but no longer<br>encouraged. The first two break callers that pass arguments by name, while the<br>last does not enforce that the arguments are actually unused.</p>
<p><a id="s2.2-imports">&lt;/a&gt;<br><a id="imports"></a></a></p>
<h3 id="2-2-Imports"><a href="#2-2-Imports" class="headerlink" title="2.2 Imports"></a>2.2 Imports</h3><p>Use <code>import</code> statements for packages and modules only, not for individual<br>classes or functions. Note that there is an explicit exemption for imports from<br>the <a href="#typing-imports">typing module</a>.</p>
<p><a id="s2.2.1-definition"></a></p>
<h4 id="2-2-1-Definition"><a href="#2-2-1-Definition" class="headerlink" title="2.2.1 Definition"></a>2.2.1 Definition</h4><p>Reusability mechanism for sharing code from one module to another.</p>
<p><a id="s2.2.2-pros"></a></p>
<h4 id="2-2-2-Pros"><a href="#2-2-2-Pros" class="headerlink" title="2.2.2 Pros"></a>2.2.2 Pros</h4><p>The namespace management convention is simple. The source of each identifier is<br>indicated in a consistent way; <code>x.Obj</code> says that object <code>Obj</code> is defined in<br>module <code>x</code>.</p>
<p><a id="s2.2.3-cons"></a></p>
<h4 id="2-2-3-Cons"><a href="#2-2-3-Cons" class="headerlink" title="2.2.3 Cons"></a>2.2.3 Cons</h4><p>Module names can still collide. Some module names are inconveniently long.</p>
<p><a id="s2.2.4-decision"></a></p>
<h4 id="2-2-4-Decision"><a href="#2-2-4-Decision" class="headerlink" title="2.2.4 Decision"></a>2.2.4 Decision</h4><ul>
<li>Use <code>import x</code> for importing packages and modules.</li>
<li>Use <code>from x import y</code> where <code>x</code> is the package prefix and <code>y</code> is the module<br>name with no prefix.</li>
<li>Use <code>from x import y as z</code> if two modules named <code>y</code> are to be imported or if<br><code>y</code> is an inconveniently long name.</li>
<li>Use <code>import y as z</code> only when <code>z</code> is a standard abbreviation (e.g., <code>np</code> for<br><code>numpy</code>).</li>
</ul>
<p>For example the module <code>sound.effects.echo</code> may be imported as follows:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sound.effects <span class="keyword">import</span> echo</span><br><span class="line">...</span><br><span class="line">echo.EchoFilter(input, output, delay=<span class="number">0.7</span>, atten=<span class="number">4</span>)</span><br></pre></td></tr></table></figure>
<p>Do not use relative names in imports. Even if the module is in the same package,<br>use the full package name. This helps prevent unintentionally importing a<br>package twice.</p>
<p>Imports from the <a href="#typing-imports">typing module</a> are exempt from this rule.</p>
<p><a id="s2.3-packages">&lt;/a&gt;<br><a id="packages"></a></a></p>
<h3 id="2-3-Packages"><a href="#2-3-Packages" class="headerlink" title="2.3 Packages"></a>2.3 Packages</h3><p>Import each module using the full pathname location of the module.</p>
<p><a id="s2.3.1-pros"></a></p>
<h4 id="2-3-1-Pros"><a href="#2-3-1-Pros" class="headerlink" title="2.3.1 Pros"></a>2.3.1 Pros</h4><p>Avoids conflicts in module names or incorrect imports due to the module search<br>path not being what the author expected.  Makes it easier to find modules.</p>
<p><a id="S2.3.2-cons"></a></p>
<h4 id="2-3-2-Cons"><a href="#2-3-2-Cons" class="headerlink" title="2.3.2 Cons"></a>2.3.2 Cons</h4><p>Makes it harder to deploy code because you have to replicate the package<br>hierarchy.  Not really a problem with modern deployment mechanisms.</p>
<p><a id="s2.3.3-decision"></a></p>
<h4 id="2-3-3-Decision"><a href="#2-3-3-Decision" class="headerlink" title="2.3.3 Decision"></a>2.3.3 Decision</h4><p>All new code should import each module by its full package name.</p>
<p>Imports should be as follows:</p>
<p>Yes:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Reference absl.flags in code with the complete name (verbose).</span></span><br><span class="line"><span class="keyword">import</span> absl.flags</span><br><span class="line"><span class="keyword">from</span> doctor.who <span class="keyword">import</span> jodie</span><br><span class="line"></span><br><span class="line">FLAGS = absl.flags.FLAGS</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Reference flags in code with just the module name (common).</span></span><br><span class="line"><span class="keyword">from</span> absl <span class="keyword">import</span> flags</span><br><span class="line"><span class="keyword">from</span> doctor.who <span class="keyword">import</span> jodie</span><br><span class="line"></span><br><span class="line">FLAGS = flags.FLAGS</span><br></pre></td></tr></table></figure>
<p>No: _(assume this file lives in <code>doctor/who/</code> where <code>jodie.py</code> also exists)_</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Unclear what module the author wanted and what will be imported.  The actual</span></span><br><span class="line"><span class="comment"># import behavior depends on external factors controlling sys.path.</span></span><br><span class="line"><span class="comment"># Which possible jodie module did the author intend to import?</span></span><br><span class="line"><span class="keyword">import</span> jodie</span><br></pre></td></tr></table></figure>
<p>The directory the main binary is located in should not be assumed to be in<br><code>sys.path</code> despite that happening in some environments.  This being the case,<br>code should assume that <code>import jodie</code> refers to a third party or top level<br>package named <code>jodie</code>, not a local <code>jodie.py</code>.</p>
<p><a id="s2.4-exceptions">&lt;/a&gt;<br><a id="exceptions"></a></a></p>
<h3 id="2-4-Exceptions"><a href="#2-4-Exceptions" class="headerlink" title="2.4 Exceptions"></a>2.4 Exceptions</h3><p>Exceptions are allowed but must be used carefully.</p>
<p><a id="s2.4.1-definition"></a></p>
<h4 id="2-4-1-Definition"><a href="#2-4-1-Definition" class="headerlink" title="2.4.1 Definition"></a>2.4.1 Definition</h4><p>Exceptions are a means of breaking out of the normal flow of control of a code<br>block to handle errors or other exceptional conditions.</p>
<p><a id="s2.4.2-pros"></a></p>
<h4 id="2-4-2-Pros"><a href="#2-4-2-Pros" class="headerlink" title="2.4.2 Pros"></a>2.4.2 Pros</h4><p>The control flow of normal operation code is not cluttered by error-handling<br>code. It also allows the control flow to skip multiple frames when a certain<br>condition occurs, e.g., returning from N nested functions in one step instead of<br>having to carry-through error codes.</p>
<p><a id="s2.4.3-cons"></a></p>
<h4 id="2-4-3-Cons"><a href="#2-4-3-Cons" class="headerlink" title="2.4.3 Cons"></a>2.4.3 Cons</h4><p>May cause the control flow to be confusing. Easy to miss error cases when making<br>library calls.</p>
<p><a id="s2.4.4-decision"></a></p>
<h4 id="2-4-4-Decision"><a href="#2-4-4-Decision" class="headerlink" title="2.4.4 Decision"></a>2.4.4 Decision</h4><p>Exceptions must follow certain conditions:</p>
<ul>
<li><p>Raise exceptions like this: <code>raise MyError(&#39;Error message&#39;)</code> or <code>raise
MyError()</code>. Do not use the two-argument form (<code>raise MyError, &#39;Error
message&#39;</code>).</p>
</li>
<li><p>Make use of built-in exception classes when it makes sense. For example,<br>raise a <code>ValueError</code> if you were passed a negative number but were expecting<br>a positive one. Do not use <code>assert</code> statements for validating argument<br>values of a public API. <code>assert</code> is used to ensure internal correctness, not<br>to enforce correct usage nor to indicate that some unexpected event<br>occurred. If an exception is desired in the latter cases, use a raise<br>statement. For example:</p>
</li>
</ul>
<pre><code><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Yes:</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">connect_to_next_port</span><span class="params">(self, minimum)</span>:</span></span><br><span class="line">    <span class="string">"""Connects to the next available port.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">      minimum: A port value greater or equal to 1024.</span></span><br><span class="line"><span class="string">    Raises:</span></span><br><span class="line"><span class="string">      ValueError: If the minimum port specified is less than 1024.</span></span><br><span class="line"><span class="string">      ConnectionError: If no available port is found.</span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">      The new minimum port.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">if</span> minimum &lt; <span class="number">1024</span>:</span><br><span class="line">      <span class="keyword">raise</span> ValueError(<span class="string">'Minimum port must be at least 1024, not %d.'</span> % (minimum,))</span><br><span class="line">    port = self._find_next_open_port(minimum)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> port:</span><br><span class="line">      <span class="keyword">raise</span> ConnectionError(<span class="string">'Could not connect to service on %d or higher.'</span> % (minimum,))</span><br><span class="line">    <span class="keyword">assert</span> port &gt;= minimum, <span class="string">'Unexpected port %d when minimum was %d.'</span> % (port, minimum)</span><br><span class="line">    <span class="keyword">return</span> port</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">No:</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">connect_to_next_port</span><span class="params">(self, minimum)</span>:</span></span><br><span class="line">    <span class="string">"""Connects to the next available port.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">      minimum: A port value greater or equal to 1024.</span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">      The new minimum port.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">assert</span> minimum &gt;= <span class="number">1024</span>, <span class="string">'Minimum port must be at least 1024.'</span></span><br><span class="line">    port = self._find_next_open_port(minimum)</span><br><span class="line">    <span class="keyword">assert</span> port <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span></span><br><span class="line">    <span class="keyword">return</span> port</span><br></pre></td></tr></table></figure>
</code></pre><ul>
<li><p>Libraries or packages may define their own exceptions. When doing so they<br>must inherit from an existing exception class. Exception names should end in<br><code>Error</code> and should not introduce stutter (<code>foo.FooError</code>).</p>
</li>
<li><p>Never use catch-all <code>except:</code> statements, or catch <code>Exception</code> or<br><code>StandardError</code>, unless you are re-raising the exception or in the outermost<br>block in your thread (and printing an error message). Python is very<br>tolerant in this regard and <code>except:</code> will really catch everything including<br>misspelled names, sys.exit() calls, Ctrl+C interrupts, unittest failures and<br>all kinds of other exceptions that you simply don’t want to catch.</p>
</li>
<li><p>Minimize the amount of code in a <code>try</code>/<code>except</code> block. The larger the body<br>of the <code>try</code>, the more likely that an exception will be raised by a line of<br>code that you didn’t expect to raise an exception. In those cases, the<br><code>try</code>/<code>except</code> block hides a real error.</p>
</li>
<li><p>Use the <code>finally</code> clause to execute code whether or not an exception is<br>raised in the <code>try</code> block. This is often useful for cleanup, i.e., closing a<br>file.</p>
</li>
<li><p>When capturing an exception, use <code>as</code> rather than a comma. For example:</p>
</li>
</ul>
<pre><code><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">  <span class="keyword">raise</span> Error()</span><br><span class="line"><span class="keyword">except</span> Error <span class="keyword">as</span> error:</span><br><span class="line">  <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
</code></pre><p><a id="s2.5-global-variables">&lt;/a&gt;<br><a id="global-variables"></a></a></p>
<h3 id="2-5-Global-variables"><a href="#2-5-Global-variables" class="headerlink" title="2.5 Global variables"></a>2.5 Global variables</h3><p>Avoid global variables.</p>
<p><a id="s2.5.1-definition"></a></p>
<h4 id="2-5-1-Definition"><a href="#2-5-1-Definition" class="headerlink" title="2.5.1 Definition"></a>2.5.1 Definition</h4><p>Variables that are declared at the module level or as class attributes.</p>
<p><a id="s2.5.2-pros"></a></p>
<h4 id="2-5-2-Pros"><a href="#2-5-2-Pros" class="headerlink" title="2.5.2 Pros"></a>2.5.2 Pros</h4><p>Occasionally useful.</p>
<p><a id="s2.5.3-cons"></a></p>
<h4 id="2-5-3-Cons"><a href="#2-5-3-Cons" class="headerlink" title="2.5.3 Cons"></a>2.5.3 Cons</h4><p>Has the potential to change module behavior during the import, because<br>assignments to global variables are done when the module is first imported.</p>
<p><a id="s2.5.4-decision"></a></p>
<h4 id="2-5-4-Decision"><a href="#2-5-4-Decision" class="headerlink" title="2.5.4 Decision"></a>2.5.4 Decision</h4><p>Avoid global variables.</p>
<p>While they are technically variables, module-level constants are permitted and<br>encouraged. For example: <code>MAX_HOLY_HANDGRENADE_COUNT = 3</code>. Constants must be<br>named using all caps with underscores. See <a href="#s3.16-naming">Naming</a> below.</p>
<p>If needed, globals should be declared at the module level and made internal to<br>the module by prepending an <code>_</code> to the name. External access must be done<br>through public module-level functions. See <a href="#s3.16-naming">Naming</a> below.</p>
<p><a id="s2.6-nested">&lt;/a&gt;<br><a id="nested"></a></a></p>
<h3 id="2-6-Nested-Local-Inner-Classes-and-Functions"><a href="#2-6-Nested-Local-Inner-Classes-and-Functions" class="headerlink" title="2.6 Nested/Local/Inner Classes and Functions"></a>2.6 Nested/Local/Inner Classes and Functions</h3><p>Nested local functions or classes are fine when used to close over a local<br>variable. Inner classes are fine.</p>
<p><a id="s2.6.1-definition"></a></p>
<h4 id="2-6-1-Definition"><a href="#2-6-1-Definition" class="headerlink" title="2.6.1 Definition"></a>2.6.1 Definition</h4><p>A class can be defined inside of a method, function, or class. A function can be<br>defined inside a method or function. Nested functions have read-only access to<br>variables defined in enclosing scopes.</p>
<p><a id="s2.6.2-pros"></a></p>
<h4 id="2-6-2-Pros"><a href="#2-6-2-Pros" class="headerlink" title="2.6.2 Pros"></a>2.6.2 Pros</h4><p>Allows definition of utility classes and functions that are only used inside of<br>a very limited scope. Very<br><a href="http://www.google.com/url?sa=D&amp;q=http://en.wikipedia.org/wiki/Abstract_data_type" target="_blank" rel="noopener">ADT</a>-y.<br>Commonly used for implementing decorators.</p>
<p><a id="s2.6.3-cons"></a></p>
<h4 id="2-6-3-Cons"><a href="#2-6-3-Cons" class="headerlink" title="2.6.3 Cons"></a>2.6.3 Cons</h4><p>Instances of nested or local classes cannot be pickled. Nested functions and<br>classes cannot be directly tested. Nesting can make your outer function longer<br>and less readable.</p>
<p><a id="s2.6.4-decision"></a></p>
<h4 id="2-6-4-Decision"><a href="#2-6-4-Decision" class="headerlink" title="2.6.4 Decision"></a>2.6.4 Decision</h4><p>They are fine with some caveats. Avoid nested functions or classes except when<br>closing over a local value. Do not nest a function just to hide it from users<br>of a module. Instead, prefix its name with an _ at the module level so that it<br>can still be accessed by tests.</p>
<p><a id="list-comprehensions">&lt;/a&gt;<br><a id="s2.7-list_comprehensions"></a><br><a id="list_comprehensions"></a></a></p>
<h3 id="2-7-Comprehensions-amp-Generator-Expressions"><a href="#2-7-Comprehensions-amp-Generator-Expressions" class="headerlink" title="2.7 Comprehensions &amp; Generator Expressions"></a>2.7 Comprehensions &amp; Generator Expressions</h3><p>Okay to use for simple cases.</p>
<p><a id="s2.7.1-definition"></a></p>
<h4 id="2-7-1-Definition"><a href="#2-7-1-Definition" class="headerlink" title="2.7.1 Definition"></a>2.7.1 Definition</h4><p>List, Dict, and Set comprehensions as well as generator expressions provide a<br>concise and efficient way to create container types and iterators without<br>resorting to the use of traditional loops, <code>map()</code>, <code>filter()</code>, or <code>lambda</code>.</p>
<p><a id="s2.7.2-pros"></a></p>
<h4 id="2-7-2-Pros"><a href="#2-7-2-Pros" class="headerlink" title="2.7.2 Pros"></a>2.7.2 Pros</h4><p>Simple comprehensions can be clearer and simpler than other dict, list, or set<br>creation techniques. Generator expressions can be very efficient, since they<br>avoid the creation of a list entirely.</p>
<p><a id="s2.7.3-cons"></a></p>
<h4 id="2-7-3-Cons"><a href="#2-7-3-Cons" class="headerlink" title="2.7.3 Cons"></a>2.7.3 Cons</h4><p>Complicated comprehensions or generator expressions can be hard to read.</p>
<p><a id="s2.7.4-decision"></a></p>
<h4 id="2-7-4-Decision"><a href="#2-7-4-Decision" class="headerlink" title="2.7.4 Decision"></a>2.7.4 Decision</h4><p>Okay to use for simple cases. Each portion must fit on one line: mapping<br>expression, <code>for</code> clause, filter expression. Multiple <code>for</code> clauses or filter<br>expressions are not permitted. Use loops instead when things get more<br>complicated.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">Yes:</span><br><span class="line">  result = [mapping_expr <span class="keyword">for</span> value <span class="keyword">in</span> iterable <span class="keyword">if</span> filter_expr]</span><br><span class="line"></span><br><span class="line">  result = [&#123;<span class="string">'key'</span>: value&#125; <span class="keyword">for</span> value <span class="keyword">in</span> iterable</span><br><span class="line">            <span class="keyword">if</span> a_long_filter_expression(value)]</span><br><span class="line"></span><br><span class="line">  result = [complicated_transform(x)</span><br><span class="line">            <span class="keyword">for</span> x <span class="keyword">in</span> iterable <span class="keyword">if</span> predicate(x)]</span><br><span class="line"></span><br><span class="line">  descriptive_name = [</span><br><span class="line">      transform(&#123;<span class="string">'key'</span>: key, <span class="string">'value'</span>: value&#125;, color=<span class="string">'black'</span>)</span><br><span class="line">      <span class="keyword">for</span> key, value <span class="keyword">in</span> generate_iterable(some_input)</span><br><span class="line">      <span class="keyword">if</span> complicated_condition_is_met(key, value)</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">  result = []</span><br><span class="line">  <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">      <span class="keyword">for</span> y <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">          <span class="keyword">if</span> x * y &gt; <span class="number">10</span>:</span><br><span class="line">              result.append((x, y))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;x: complicated_transform(x)</span><br><span class="line">          <span class="keyword">for</span> x <span class="keyword">in</span> long_generator_function(parameter)</span><br><span class="line">          <span class="keyword">if</span> x <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>&#125;</span><br><span class="line"></span><br><span class="line">  squares_generator = (x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">  unique_names = &#123;user.name <span class="keyword">for</span> user <span class="keyword">in</span> users <span class="keyword">if</span> user <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>&#125;</span><br><span class="line"></span><br><span class="line">  eat(jelly_bean <span class="keyword">for</span> jelly_bean <span class="keyword">in</span> jelly_beans</span><br><span class="line">      <span class="keyword">if</span> jelly_bean.color == <span class="string">'black'</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">No:</span><br><span class="line">  result = [complicated_transform(</span><br><span class="line">                x, some_argument=x+<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">for</span> x <span class="keyword">in</span> iterable <span class="keyword">if</span> predicate(x)]</span><br><span class="line"></span><br><span class="line">  result = [(x, y) <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>) <span class="keyword">for</span> y <span class="keyword">in</span> range(<span class="number">5</span>) <span class="keyword">if</span> x * y &gt; <span class="number">10</span>]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> ((x, y, z)</span><br><span class="line">          <span class="keyword">for</span> x <span class="keyword">in</span> xrange(<span class="number">5</span>)</span><br><span class="line">          <span class="keyword">for</span> y <span class="keyword">in</span> xrange(<span class="number">5</span>)</span><br><span class="line">          <span class="keyword">if</span> x != y</span><br><span class="line">          <span class="keyword">for</span> z <span class="keyword">in</span> xrange(<span class="number">5</span>)</span><br><span class="line">          <span class="keyword">if</span> y != z)</span><br></pre></td></tr></table></figure>
<p><a id="s2.8-default-iterators-and-operators">&lt;/a&gt;<br><a id="default-iterators-and-operators"></a></a></p>
<h3 id="2-8-Default-Iterators-and-Operators"><a href="#2-8-Default-Iterators-and-Operators" class="headerlink" title="2.8 Default Iterators and Operators"></a>2.8 Default Iterators and Operators</h3><p>Use default iterators and operators for types that support them, like lists,<br>dictionaries, and files.</p>
<p><a id="s2.8.1-definition"></a></p>
<h4 id="2-8-1-Definition"><a href="#2-8-1-Definition" class="headerlink" title="2.8.1 Definition"></a>2.8.1 Definition</h4><p>Container types, like dictionaries and lists, define default iterators and<br>membership test operators (“in” and “not in”).</p>
<p><a id="s2.8.2-pros"></a></p>
<h4 id="2-8-2-Pros"><a href="#2-8-2-Pros" class="headerlink" title="2.8.2 Pros"></a>2.8.2 Pros</h4><p>The default iterators and operators are simple and efficient. They express the<br>operation directly, without extra method calls. A function that uses default<br>operators is generic. It can be used with any type that supports the operation.</p>
<p><a id="s2.8.3-cons"></a></p>
<h4 id="2-8-3-Cons"><a href="#2-8-3-Cons" class="headerlink" title="2.8.3 Cons"></a>2.8.3 Cons</h4><p>You can’t tell the type of objects by reading the method names (e.g. has_key()<br>means a dictionary). This is also an advantage.</p>
<p><a id="s2.8.4-decision"></a></p>
<h4 id="2-8-4-Decision"><a href="#2-8-4-Decision" class="headerlink" title="2.8.4 Decision"></a>2.8.4 Decision</h4><p>Use default iterators and operators for types that support them, like lists,<br>dictionaries, and files. The built-in types define iterator methods, too. Prefer<br>these methods to methods that return lists, except that you should not mutate a<br>container while iterating over it. Never use Python 2 specific iteration<br>methods such as <code>dict.iter*()</code> unless necessary.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Yes:  <span class="keyword">for</span> key <span class="keyword">in</span> adict: ...</span><br><span class="line">      <span class="keyword">if</span> key <span class="keyword">not</span> <span class="keyword">in</span> adict: ...</span><br><span class="line">      <span class="keyword">if</span> obj <span class="keyword">in</span> alist: ...</span><br><span class="line">      <span class="keyword">for</span> line <span class="keyword">in</span> afile: ...</span><br><span class="line">      <span class="keyword">for</span> k, v <span class="keyword">in</span> adict.items(): ...</span><br><span class="line">      <span class="keyword">for</span> k, v <span class="keyword">in</span> six.iteritems(adict): ...</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">No:   <span class="keyword">for</span> key <span class="keyword">in</span> adict.keys(): ...</span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">not</span> adict.has_key(key): ...</span><br><span class="line">      <span class="keyword">for</span> line <span class="keyword">in</span> afile.readlines(): ...</span><br><span class="line">      <span class="keyword">for</span> k, v <span class="keyword">in</span> dict.iteritems(): ...</span><br></pre></td></tr></table></figure>
<p><a id="s2.9-generators">&lt;/a&gt;<br><a id="generators"></a></a></p>
<h3 id="2-9-Generators"><a href="#2-9-Generators" class="headerlink" title="2.9 Generators"></a>2.9 Generators</h3><p>Use generators as needed.</p>
<p><a id="s2.9.1-definition"></a></p>
<h4 id="2-9-1-Definition"><a href="#2-9-1-Definition" class="headerlink" title="2.9.1 Definition"></a>2.9.1 Definition</h4><p>A generator function returns an iterator that yields a value each time it<br>executes a yield statement. After it yields a value, the runtime state of the<br>generator function is suspended until the next value is needed.</p>
<p><a id="s2.9.2-pros"></a></p>
<h4 id="2-9-2-Pros"><a href="#2-9-2-Pros" class="headerlink" title="2.9.2 Pros"></a>2.9.2 Pros</h4><p>Simpler code, because the state of local variables and control flow are<br>preserved for each call. A generator uses less memory than a function that<br>creates an entire list of values at once.</p>
<p><a id="s2.9.3-cons"></a></p>
<h4 id="2-9-3-Cons"><a href="#2-9-3-Cons" class="headerlink" title="2.9.3 Cons"></a>2.9.3 Cons</h4><p>None.</p>
<p><a id="s2.9.4-decision"></a></p>
<h4 id="2-9-4-Decision"><a href="#2-9-4-Decision" class="headerlink" title="2.9.4 Decision"></a>2.9.4 Decision</h4><p>Fine. Use “Yields:” rather than “Returns:” in the docstring for generator<br>functions.</p>
<p><a id="s2.10-lambda-functions">&lt;/a&gt;<br><a id="lambda-functions"></a></a></p>
<h3 id="2-10-Lambda-Functions"><a href="#2-10-Lambda-Functions" class="headerlink" title="2.10 Lambda Functions"></a>2.10 Lambda Functions</h3><p>Okay for one-liners.</p>
<p><a id="s2.10.1-definition"></a></p>
<h4 id="2-10-1-Definition"><a href="#2-10-1-Definition" class="headerlink" title="2.10.1 Definition"></a>2.10.1 Definition</h4><p>Lambdas define anonymous functions in an expression, as opposed to a statement.<br>They are often used to define callbacks or operators for higher-order functions<br>like <code>map()</code> and <code>filter()</code>.</p>
<p><a id="s2.10.2-pros"></a></p>
<h4 id="2-10-2-Pros"><a href="#2-10-2-Pros" class="headerlink" title="2.10.2 Pros"></a>2.10.2 Pros</h4><p>Convenient.</p>
<p><a id="s2.10.3-cons"></a></p>
<h4 id="2-10-3-Cons"><a href="#2-10-3-Cons" class="headerlink" title="2.10.3 Cons"></a>2.10.3 Cons</h4><p>Harder to read and debug than local functions. The lack of names means stack<br>traces are more difficult to understand. Expressiveness is limited because the<br>function may only contain an expression.</p>
<p><a id="s2.10.4-decision"></a></p>
<h4 id="2-10-4-Decision"><a href="#2-10-4-Decision" class="headerlink" title="2.10.4 Decision"></a>2.10.4 Decision</h4><p>Okay to use them for one-liners. If the code inside the lambda function is<br>longer than 60-80 chars, it’s probably better to define it as a regular <a href="#lexical-scoping">nested<br>function</a>.</p>
<p>For common operations like multiplication, use the functions from the <code>operator</code><br>module instead of lambda functions. For example, prefer <code>operator.mul</code> to<br><code>lambda x, y: x * y</code>.</p>
<p><a id="s2.11-conditional-expressions">&lt;/a&gt;<br><a id="conditional-expressions"></a></a></p>
<h3 id="2-11-Conditional-Expressions"><a href="#2-11-Conditional-Expressions" class="headerlink" title="2.11 Conditional Expressions"></a>2.11 Conditional Expressions</h3><p>Okay for one-liners.</p>
<p><a id="s2.11.1-definition"></a></p>
<h4 id="2-11-1-Definition"><a href="#2-11-1-Definition" class="headerlink" title="2.11.1 Definition"></a>2.11.1 Definition</h4><p>Conditional expressions (sometimes called a “ternary operator”) are mechanisms<br>that provide a shorter syntax for if statements. For example:<br><code>x = 1 if cond else 2</code>.</p>
<p><a id="s2.11.2-pros"></a></p>
<h4 id="2-11-2-Pros"><a href="#2-11-2-Pros" class="headerlink" title="2.11.2 Pros"></a>2.11.2 Pros</h4><p>Shorter and more convenient than an if statement.</p>
<p><a id="s2.11.3-cons"></a></p>
<h4 id="2-11-3-Cons"><a href="#2-11-3-Cons" class="headerlink" title="2.11.3 Cons"></a>2.11.3 Cons</h4><p>May be harder to read than an if statement. The condition may be difficult to<br>locate if the expression is long.</p>
<p><a id="s2.11.4-decision"></a></p>
<h4 id="2-11-4-Decision"><a href="#2-11-4-Decision" class="headerlink" title="2.11.4 Decision"></a>2.11.4 Decision</h4><p>Okay to use for one-liners. In other cases prefer to use a complete if<br>statement.</p>
<p><a id="s2.12-default-argument-values">&lt;/a&gt;<br><a id="default-argument-values"></a></a></p>
<h3 id="2-12-Default-Argument-Values"><a href="#2-12-Default-Argument-Values" class="headerlink" title="2.12 Default Argument Values"></a>2.12 Default Argument Values</h3><p>Okay in most cases.</p>
<p><a id="s2.12.1-definition"></a></p>
<h4 id="2-12-1-Definition"><a href="#2-12-1-Definition" class="headerlink" title="2.12.1 Definition"></a>2.12.1 Definition</h4><p>You can specify values for variables at the end of a function’s parameter list,<br>e.g., <code>def foo(a, b=0):</code>.  If <code>foo</code> is called with only one argument,<br><code>b</code> is set to 0. If it is called with two arguments, <code>b</code> has the value of the<br>second argument.</p>
<p><a id="s2.12.2-pros"></a></p>
<h4 id="2-12-2-Pros"><a href="#2-12-2-Pros" class="headerlink" title="2.12.2 Pros"></a>2.12.2 Pros</h4><p>Often you have a function that uses lots of default values, but-rarely-you want<br>to override the defaults. Default argument values provide an easy way to do<br>this, without having to define lots of functions for the rare exceptions. Also,<br>Python does not support overloaded methods/functions and default arguments are<br>an easy way of “faking” the overloading behavior.</p>
<p><a id="s2.12.3-cons"></a></p>
<h4 id="2-12-3-Cons"><a href="#2-12-3-Cons" class="headerlink" title="2.12.3 Cons"></a>2.12.3 Cons</h4><p>Default arguments are evaluated once at module load time. This may cause<br>problems if the argument is a mutable object such as a list or a dictionary. If<br>the function modifies the object (e.g., by appending an item to a list), the<br>default value is modified.</p>
<p><a id="s2.12.4-decision"></a></p>
<h4 id="2-12-4-Decision"><a href="#2-12-4-Decision" class="headerlink" title="2.12.4 Decision"></a>2.12.4 Decision</h4><p>Okay to use with the following caveat:</p>
<p>Do not use mutable objects as default values in the function or method<br>definition.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Yes: <span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(a, b=None)</span>:</span></span><br><span class="line">         <span class="keyword">if</span> b <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">             b = []</span><br><span class="line">Yes: <span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(a, b: Optional[Sequence] = None)</span>:</span></span><br><span class="line">         <span class="keyword">if</span> b <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">             b = []</span><br><span class="line">Yes: <span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(a, b: Sequence = <span class="params">()</span>)</span>:</span>  <span class="comment"># Empty tuple OK since tuples are immutable</span></span><br><span class="line">         ...</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">No:  <span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(a, b=[])</span>:</span></span><br><span class="line">         ...</span><br><span class="line">No:  <span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(a, b=time.time<span class="params">()</span>)</span>:</span>  <span class="comment"># The time the module was loaded???</span></span><br><span class="line">         ...</span><br><span class="line">No:  <span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(a, b=FLAGS.my_thing)</span>:</span>  <span class="comment"># sys.argv has not yet been parsed...</span></span><br><span class="line">         ...</span><br></pre></td></tr></table></figure>
<p><a id="s2.13-properties">&lt;/a&gt;<br><a id="properties"></a></a></p>
<h3 id="2-13-Properties"><a href="#2-13-Properties" class="headerlink" title="2.13 Properties"></a>2.13 Properties</h3><p>Use properties for accessing or setting data where you would normally have used<br>simple, lightweight accessor or setter methods.</p>
<p><a id="s2.13.1-definition"></a></p>
<h4 id="2-13-1-Definition"><a href="#2-13-1-Definition" class="headerlink" title="2.13.1 Definition"></a>2.13.1 Definition</h4><p>A way to wrap method calls for getting and setting an attribute as a standard<br>attribute access when the computation is lightweight.</p>
<p><a id="s2.13.2-pros"></a></p>
<h4 id="2-13-2-Pros"><a href="#2-13-2-Pros" class="headerlink" title="2.13.2 Pros"></a>2.13.2 Pros</h4><p>Readability is increased by eliminating explicit get and set method calls for<br>simple attribute access. Allows calculations to be lazy. Considered the Pythonic<br>way to maintain the interface of a class. In terms of performance, allowing<br>properties bypasses needing trivial accessor methods when a direct variable<br>access is reasonable. This also allows accessor methods to be added in the<br>future without breaking the interface.</p>
<p><a id="s2.13.3-cons"></a></p>
<h4 id="2-13-3-Cons"><a href="#2-13-3-Cons" class="headerlink" title="2.13.3 Cons"></a>2.13.3 Cons</h4><p>Must inherit from <code>object</code> in Python 2. Can hide side-effects much like operator<br>overloading. Can be confusing for subclasses.</p>
<p><a id="s2.13.4-decision"></a></p>
<h4 id="2-13-4-Decision"><a href="#2-13-4-Decision" class="headerlink" title="2.13.4 Decision"></a>2.13.4 Decision</h4><p>Use properties in new code to access or set data where you would normally have<br>used simple, lightweight accessor or setter methods. Properties should be<br>created with the <code>@property</code> <a href="#s2.17-function-and-method-decorators">decorator</a>.</p>
<p>Inheritance with properties can be non-obvious if the property itself is not<br>overridden. Thus one must make sure that accessor methods are called indirectly<br>to ensure methods overridden in subclasses are called by the property (using the<br>Template Method DP).</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">Yes: <span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line">     <span class="class"><span class="keyword">class</span> <span class="title">Square</span><span class="params">(object)</span>:</span></span><br><span class="line">         <span class="string">"""A square with two properties: a writable area and a read-only perimeter.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         To use:</span></span><br><span class="line"><span class="string">         &gt;&gt;&gt; sq = Square(3)</span></span><br><span class="line"><span class="string">         &gt;&gt;&gt; sq.area</span></span><br><span class="line"><span class="string">         9</span></span><br><span class="line"><span class="string">         &gt;&gt;&gt; sq.perimeter</span></span><br><span class="line"><span class="string">         12</span></span><br><span class="line"><span class="string">         &gt;&gt;&gt; sq.area = 16</span></span><br><span class="line"><span class="string">         &gt;&gt;&gt; sq.side</span></span><br><span class="line"><span class="string">         4</span></span><br><span class="line"><span class="string">         &gt;&gt;&gt; sq.perimeter</span></span><br><span class="line"><span class="string">         16</span></span><br><span class="line"><span class="string">         """</span></span><br><span class="line"></span><br><span class="line">         <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, side)</span>:</span></span><br><span class="line">             self.side = side</span><br><span class="line"></span><br><span class="line"><span class="meta">         @property</span></span><br><span class="line">         <span class="function"><span class="keyword">def</span> <span class="title">area</span><span class="params">(self)</span>:</span></span><br><span class="line">             <span class="string">"""Gets or sets the area of the square."""</span></span><br><span class="line">             <span class="keyword">return</span> self._get_area()</span><br><span class="line"></span><br><span class="line"><span class="meta">         @area.setter</span></span><br><span class="line">         <span class="function"><span class="keyword">def</span> <span class="title">area</span><span class="params">(self, area)</span>:</span></span><br><span class="line">             <span class="keyword">return</span> self._set_area(area)</span><br><span class="line"></span><br><span class="line">         <span class="function"><span class="keyword">def</span> <span class="title">_get_area</span><span class="params">(self)</span>:</span></span><br><span class="line">             <span class="string">"""Indirect accessor to calculate the 'area' property."""</span></span><br><span class="line">             <span class="keyword">return</span> self.side ** <span class="number">2</span></span><br><span class="line"></span><br><span class="line">         <span class="function"><span class="keyword">def</span> <span class="title">_set_area</span><span class="params">(self, area)</span>:</span></span><br><span class="line">             <span class="string">"""Indirect setter to set the 'area' property."""</span></span><br><span class="line">             self.side = math.sqrt(area)</span><br><span class="line"></span><br><span class="line"><span class="meta">         @property</span></span><br><span class="line">         <span class="function"><span class="keyword">def</span> <span class="title">perimeter</span><span class="params">(self)</span>:</span></span><br><span class="line">             <span class="keyword">return</span> self.side * <span class="number">4</span></span><br></pre></td></tr></table></figure>
<p><a id="s2.14-truefalse-evaluations">&lt;/a&gt;<br><a id="truefalse-evaluations"></a></a></p>
<h3 id="2-14-True-False-evaluations"><a href="#2-14-True-False-evaluations" class="headerlink" title="2.14 True/False evaluations"></a>2.14 True/False evaluations</h3><p>Use the “implicit” false if at all possible.</p>
<p><a id="s2.14.1-definition"></a></p>
<h4 id="2-14-1-Definition"><a href="#2-14-1-Definition" class="headerlink" title="2.14.1 Definition"></a>2.14.1 Definition</h4><p>Python evaluates certain values as <code>False</code> when in a boolean context. A quick<br>“rule of thumb” is that all “empty” values are considered false, so<br><code>0, None, [], {}, &#39;&#39;</code> all evaluate as false in a boolean context.</p>
<p><a id="s2.14.2-pros"></a></p>
<h4 id="2-14-2-Pros"><a href="#2-14-2-Pros" class="headerlink" title="2.14.2 Pros"></a>2.14.2 Pros</h4><p>Conditions using Python booleans are easier to read and less error-prone. In<br>most cases, they’re also faster.</p>
<p><a id="s2.14.3-cons"></a></p>
<h4 id="2-14-3-Cons"><a href="#2-14-3-Cons" class="headerlink" title="2.14.3 Cons"></a>2.14.3 Cons</h4><p>May look strange to C/C++ developers.</p>
<p><a id="s2.14.4-decision"></a></p>
<h4 id="2-14-4-Decision"><a href="#2-14-4-Decision" class="headerlink" title="2.14.4 Decision"></a>2.14.4 Decision</h4><p>Use the “implicit” false if at all possible, e.g., <code>if foo:</code> rather than<br><code>if foo != []:</code>. There are a few caveats that you should keep in mind though:</p>
<ul>
<li><p>Never use <code>==</code> or <code>!=</code> to compare singletons like <code>None</code>. Use <code>is</code> or<br><code>is not</code>.</p>
</li>
<li><p>Beware of writing <code>if x:</code> when you really mean <code>if x is not None:</code>-e.g.,<br>when testing whether a variable or argument that defaults to <code>None</code> was set<br>to some other value. The other value might be a value that’s false in a<br>boolean context!</p>
</li>
<li><p>Never compare a boolean variable to <code>False</code> using <code>==</code>. Use <code>if not x:</code><br>instead. If you need to distinguish <code>False</code> from <code>None</code> then chain the<br>expressions, such as <code>if not x and x is not None:</code>.</p>
</li>
<li><p>For sequences (strings, lists, tuples), use the fact that empty sequences<br>are false, so <code>if seq:</code> and <code>if not seq:</code> are preferable to <code>if len(seq):</code><br>and <code>if not len(seq):</code> respectively.</p>
</li>
<li><p>When handling integers, implicit false may involve more risk than benefit<br>(i.e., accidentally handling <code>None</code> as 0). You may compare a value which is<br>known to be an integer (and is not the result of <code>len()</code>) against the<br>integer 0.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Yes: <span class="keyword">if</span> <span class="keyword">not</span> users:</span><br><span class="line">         print(<span class="string">'no users'</span>)</span><br><span class="line"></span><br><span class="line">     <span class="keyword">if</span> foo == <span class="number">0</span>:</span><br><span class="line">         self.handle_zero()</span><br><span class="line"></span><br><span class="line">     <span class="keyword">if</span> i % <span class="number">10</span> == <span class="number">0</span>:</span><br><span class="line">         self.handle_multiple_of_ten()</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x=None)</span>:</span></span><br><span class="line">         <span class="keyword">if</span> x <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">             x = []</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">No:  <span class="keyword">if</span> len(users) == <span class="number">0</span>:</span><br><span class="line">         print(<span class="string">'no users'</span>)</span><br><span class="line"></span><br><span class="line">     <span class="keyword">if</span> foo <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> <span class="keyword">not</span> foo:</span><br><span class="line">         self.handle_zero()</span><br><span class="line"></span><br><span class="line">     <span class="keyword">if</span> <span class="keyword">not</span> i % <span class="number">10</span>:</span><br><span class="line">         self.handle_multiple_of_ten()</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x=None)</span>:</span></span><br><span class="line">         x = x <span class="keyword">or</span> []</span><br></pre></td></tr></table></figure>
</li>
<li><p>Note that <code>&#39;0&#39;</code> (i.e., <code>0</code> as string) evaluates to true.</p>
</li>
</ul>
<p><a id="s2.15-deprecated-language-features">&lt;/a&gt;<br><a id="deprecated-language-features"></a></a></p>
<h3 id="2-15-Deprecated-Language-Features"><a href="#2-15-Deprecated-Language-Features" class="headerlink" title="2.15 Deprecated Language Features"></a>2.15 Deprecated Language Features</h3><p>Use string methods instead of the <code>string</code> module where possible. Use function<br>call syntax instead of <code>apply</code>. Use list comprehensions and <code>for</code> loops instead<br>of <code>filter</code> and <code>map</code> when the function argument would have been an inlined<br>lambda anyway. Use <code>for</code> loops instead of <code>reduce</code>.</p>
<p><a id="s2.15.1-definition"></a></p>
<h4 id="2-15-1-Definition"><a href="#2-15-1-Definition" class="headerlink" title="2.15.1 Definition"></a>2.15.1 Definition</h4><p>Current versions of Python provide alternative constructs that people find<br>generally preferable.</p>
<p><a id="s2.15.2-decision"></a></p>
<h4 id="2-15-2-Decision"><a href="#2-15-2-Decision" class="headerlink" title="2.15.2 Decision"></a>2.15.2 Decision</h4><p>We do not use any Python version which does not support these features, so there<br>is no reason not to use the new styles.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Yes: words = foo.split(<span class="string">':'</span>)</span><br><span class="line"></span><br><span class="line">     [x[<span class="number">1</span>] <span class="keyword">for</span> x <span class="keyword">in</span> my_list <span class="keyword">if</span> x[<span class="number">2</span>] == <span class="number">5</span>]</span><br><span class="line"></span><br><span class="line">     map(math.sqrt, data)    <span class="comment"># Ok. No inlined lambda expression.</span></span><br><span class="line"></span><br><span class="line">     fn(*args, **kwargs)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">No:  words = string.split(foo, <span class="string">':'</span>)</span><br><span class="line"></span><br><span class="line">     map(<span class="keyword">lambda</span> x: x[<span class="number">1</span>], filter(<span class="keyword">lambda</span> x: x[<span class="number">2</span>] == <span class="number">5</span>, my_list))</span><br><span class="line"></span><br><span class="line">     apply(fn, args, kwargs)</span><br></pre></td></tr></table></figure>
<p><a id="s2.16-lexical-scoping">&lt;/a&gt;<br><a id="lexical-scoping"></a></a></p>
<h3 id="2-16-Lexical-Scoping"><a href="#2-16-Lexical-Scoping" class="headerlink" title="2.16 Lexical Scoping"></a>2.16 Lexical Scoping</h3><p>Okay to use.</p>
<p><a id="s2.16.1-definition"></a></p>
<h4 id="2-16-1-Definition"><a href="#2-16-1-Definition" class="headerlink" title="2.16.1 Definition"></a>2.16.1 Definition</h4><p>A nested Python function can refer to variables defined in enclosing functions,<br>but can not assign to them. Variable bindings are resolved using lexical<br>scoping, that is, based on the static program text. Any assignment to a name in<br>a block will cause Python to treat all references to that name as a local<br>variable, even if the use precedes the assignment. If a global declaration<br>occurs, the name is treated as a global variable.</p>
<p>An example of the use of this feature is:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_adder</span><span class="params">(summand1)</span>:</span></span><br><span class="line">    <span class="string">"""Returns a function that adds numbers to a given number."""</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">adder</span><span class="params">(summand2)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> summand1 + summand2</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> adder</span><br></pre></td></tr></table></figure>
<p><a id="s2.16.2-pros"></a></p>
<h4 id="2-16-2-Pros"><a href="#2-16-2-Pros" class="headerlink" title="2.16.2 Pros"></a>2.16.2 Pros</h4><p>Often results in clearer, more elegant code. Especially comforting to<br>experienced Lisp and Scheme (and Haskell and ML and …) programmers.</p>
<p><a id="s2.16.3-cons"></a></p>
<h4 id="2-16-3-Cons"><a href="#2-16-3-Cons" class="headerlink" title="2.16.3 Cons"></a>2.16.3 Cons</h4><p>Can lead to confusing bugs. Such as this example based on<br><a href="http://www.google.com/url?sa=D&amp;q=http://www.python.org/dev/peps/pep-0227/" target="_blank" rel="noopener">PEP-0227</a>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">i = <span class="number">4</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">()</span>:</span></span><br><span class="line">        print(i, end=<span class="string">''</span>)</span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line">    <span class="comment"># A bunch of code here</span></span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> x:  <span class="comment"># Ah, i *is* local to foo, so this is what bar sees</span></span><br><span class="line">        print(i, end=<span class="string">''</span>)</span><br><span class="line">    bar()</span><br></pre></td></tr></table></figure>
<p>So <code>foo([1, 2, 3])</code> will print <code>1 2 3 3</code>, not <code>1 2 3
4</code>.</p>
<p><a id="s2.16.4-decision"></a></p>
<h4 id="2-16-4-Decision"><a href="#2-16-4-Decision" class="headerlink" title="2.16.4 Decision"></a>2.16.4 Decision</h4><p>Okay to use.</p>
<p><a id="s2.17-function-and-method-decorators">&lt;/a&gt;<br><a id="function-and-method-decorators"></a></a></p>
<h3 id="2-17-Function-and-Method-Decorators"><a href="#2-17-Function-and-Method-Decorators" class="headerlink" title="2.17 Function and Method Decorators"></a>2.17 Function and Method Decorators</h3><p>Use decorators judiciously when there is a clear advantage. Avoid<br><code>@staticmethod</code> and limit use of <code>@classmethod</code>.</p>
<p><a id="s2.17.1-definition"></a></p>
<h4 id="2-17-1-Definition"><a href="#2-17-1-Definition" class="headerlink" title="2.17.1 Definition"></a>2.17.1 Definition</h4><p><a href="https://docs.python.org/3/glossary.html#term-decorator" target="_blank" rel="noopener">Decorators for Functions and<br>Methods</a><br>(a.k.a “the <code>@</code> notation”). One common decorator is <code>@property</code>, used for<br>converting ordinary methods into dynamically computed attributes. However, the<br>decorator syntax allows for user-defined decorators as well. Specifically, for<br>some function <code>my_decorator</code>, this:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(object)</span>:</span></span><br><span class="line"><span class="meta">    @my_decorator</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">method</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># method body ...</span></span><br></pre></td></tr></table></figure>
<p>is equivalent to:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">method</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># method body ...</span></span><br><span class="line">    method = my_decorator(method)</span><br></pre></td></tr></table></figure>
<p><a id="s2.17.2-pros"></a></p>
<h4 id="2-17-2-Pros"><a href="#2-17-2-Pros" class="headerlink" title="2.17.2 Pros"></a>2.17.2 Pros</h4><p>Elegantly specifies some transformation on a method; the transformation might<br>eliminate some repetitive code, enforce invariants, etc.</p>
<p><a id="s2.17.3-cons"></a></p>
<h4 id="2-17-3-Cons"><a href="#2-17-3-Cons" class="headerlink" title="2.17.3 Cons"></a>2.17.3 Cons</h4><p>Decorators can perform arbitrary operations on a function’s arguments or return<br>values, resulting in surprising implicit behavior. Additionally, decorators<br>execute at import time. Failures in decorator code are pretty much impossible to<br>recover from.</p>
<p><a id="s2.17.4-decision"></a></p>
<h4 id="2-17-4-Decision"><a href="#2-17-4-Decision" class="headerlink" title="2.17.4 Decision"></a>2.17.4 Decision</h4><p>Use decorators judiciously when there is a clear advantage. Decorators should<br>follow the same import and naming guidelines as functions. Decorator pydoc<br>should clearly state that the function is a decorator. Write unit tests for<br>decorators.</p>
<p>Avoid external dependencies in the decorator itself (e.g. don’t rely on files,<br>sockets, database connections, etc.), since they might not be available when the<br>decorator runs (at import time, perhaps from <code>pydoc</code> or other tools). A<br>decorator that is called with valid parameters should (as much as possible) be<br>guaranteed to succeed in all cases.</p>
<p>Decorators are a special case of “top level code” - see <a href="#s3.17-main">main</a> for<br>more discussion.</p>
<p>Never use <code>@staticmethod</code> unless forced to in order to integrate with an API<br>defined in an existing library. Write a module level function instead.</p>
<p>Use <code>@classmethod</code> only when writing a named constructor or a class-specific<br>routine that modifies necessary global state such as a process-wide cache.</p>
<p><a id="s2.18-threading">&lt;/a&gt;<br><a id="threading"></a></a></p>
<h3 id="2-18-Threading"><a href="#2-18-Threading" class="headerlink" title="2.18 Threading"></a>2.18 Threading</h3><p>Do not rely on the atomicity of built-in types.</p>
<p>While Python’s built-in data types such as dictionaries appear to have atomic<br>operations, there are corner cases where they aren’t atomic (e.g. if <code>__hash__</code><br>or <code>__eq__</code> are implemented as Python methods) and their atomicity should not be<br>relied upon. Neither should you rely on atomic variable assignment (since this<br>in turn depends on dictionaries).</p>
<p>Use the Queue module’s <code>Queue</code> data type as the preferred way to communicate<br>data between threads. Otherwise, use the threading module and its locking<br>primitives. Learn about the proper use of condition variables so you can use<br><code>threading.Condition</code> instead of using lower-level locks.</p>
<p><a id="s2.19-power-features">&lt;/a&gt;<br><a id="power-features"></a></a></p>
<h3 id="2-19-Power-Features"><a href="#2-19-Power-Features" class="headerlink" title="2.19 Power Features"></a>2.19 Power Features</h3><p>Avoid these features.</p>
<p><a id="s2.19.1-definition"></a></p>
<h4 id="2-19-1-Definition"><a href="#2-19-1-Definition" class="headerlink" title="2.19.1 Definition"></a>2.19.1 Definition</h4><p>Python is an extremely flexible language and gives you many fancy features such<br>as custom metaclasses, access to bytecode, on-the-fly compilation, dynamic<br>inheritance, object reparenting, import hacks, reflection (e.g. some uses of<br><code>getattr()</code>), modification of system internals, etc.</p>
<p><a id="s2.19.2-pros"></a></p>
<h4 id="2-19-2-Pros"><a href="#2-19-2-Pros" class="headerlink" title="2.19.2 Pros"></a>2.19.2 Pros</h4><p>These are powerful language features. They can make your code more compact.</p>
<p><a id="s2.19.3-cons"></a></p>
<h4 id="2-19-3-Cons"><a href="#2-19-3-Cons" class="headerlink" title="2.19.3 Cons"></a>2.19.3 Cons</h4><p>It’s very tempting to use these “cool” features when they’re not absolutely<br>necessary. It’s harder to read, understand, and debug code that’s using unusual<br>features underneath. It doesn’t seem that way at first (to the original author),<br>but when revisiting the code, it tends to be more difficult than code that is<br>longer but is straightforward.</p>
<p><a id="s2.19.4-decision"></a></p>
<h4 id="2-19-4-Decision"><a href="#2-19-4-Decision" class="headerlink" title="2.19.4 Decision"></a>2.19.4 Decision</h4><p>Avoid these features in your code.</p>
<p>Standard library modules and classes that internally use these features are okay<br>to use (for example, <code>abc.ABCMeta</code>, <code>collections.namedtuple</code>, <code>dataclasses</code>,<br>and <code>enum</code>).</p>
<p><a id="s2.20-modern-python">&lt;/a&gt;<br><a id="modern-python"></a></a></p>
<h3 id="2-20-Modern-Python-Python-3-and-from-future-imports"><a href="#2-20-Modern-Python-Python-3-and-from-future-imports" class="headerlink" title="2.20 Modern Python: Python 3 and from __future__ imports"></a>2.20 Modern Python: Python 3 and from __future__ imports</h3><p>Python 3 is here! While not every project is ready to<br>use it yet, all code should be written to be 3 compatible (and tested under<br>3 when possible).</p>
<p><a id="s2.20.1-definition"></a></p>
<h4 id="2-20-1-Definition"><a href="#2-20-1-Definition" class="headerlink" title="2.20.1 Definition"></a>2.20.1 Definition</h4><p>Python 3 is a significant change in the Python language. While existing code is<br>often written with 2.7 in mind, there are some simple things to do to make code<br>more explicit about its intentions and thus better prepared for use under Python<br>3 without modification.</p>
<p><a id="s2.20.2-pros"></a></p>
<h4 id="2-20-2-Pros"><a href="#2-20-2-Pros" class="headerlink" title="2.20.2 Pros"></a>2.20.2 Pros</h4><p>Code written with Python 3 in mind is more explicit and easier to get running<br>under Python 3 once all of the dependencies of your project are ready.</p>
<p><a id="s2.20.3-cons"></a></p>
<h4 id="2-20-3-Cons"><a href="#2-20-3-Cons" class="headerlink" title="2.20.3 Cons"></a>2.20.3 Cons</h4><p>Some people find the additional boilerplate to be ugly. It’s unusual to add<br>imports to a module that doesn’t actually require the features added by the<br>import.</p>
<p><a id="s2.20.4-decision"></a></p>
<h4 id="2-20-4-Decision"><a href="#2-20-4-Decision" class="headerlink" title="2.20.4 Decision"></a>2.20.4 Decision</h4><h5 id="from-future-imports"><a href="#from-future-imports" class="headerlink" title="from __future__ imports"></a>from __future__ imports</h5><p>Use of <code>from __future__ import</code> statements is encouraged. All new code should<br>contain the following and existing code should be updated to be compatible when<br>possible:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> absolute_import</span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> division</span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function</span><br></pre></td></tr></table></figure>
<p>If you are not already familiar with those, read up on each here: <a href="https://www.python.org/dev/peps/pep-0328/" target="_blank" rel="noopener">absolute<br>imports</a>, <a href="https://www.python.org/dev/peps/pep-0238/" target="_blank" rel="noopener">new <code>/</code> division<br>behavior</a>, and <a href="https://www.python.org/dev/peps/pep-3105/" target="_blank" rel="noopener">the print<br>function</a>.</p>
<p>Please don’t omit or remove these imports, even if they’re not currently used<br>in the module. It is better to always have the future imports in all files<br>so that they are not forgotten during later edits when someone starts using<br>such a feature.</p>
<p>There are other <code>from __future__</code> import statements. Use them as you see fit. We<br>do not include <code>unicode_literals</code> in our recommendations as it is not a clear<br>win due to implicit default codec conversion consequences it introduces in many<br>places within Python 2.7. Most code is better off with explicit use of <code>b&#39;&#39;</code> and<br><code>u&#39;&#39;</code> bytes and unicode string literals as necessary.</p>
<h5 id="The-six-future-or-past-libraries"><a href="#The-six-future-or-past-libraries" class="headerlink" title="The six, future, or past libraries."></a>The six, future, or past libraries.</h5><p>When your project needs to actively support use under both Python 2 and 3, use<br>of these libraries is encouraged as you see fit. They exist to make your code<br>cleaner and life easier.</p>
<p><a name="s2.21-typed-code">&lt;/a&gt;<br><a name="typed-code"></a></a></p>
<h3 id="2-21-Type-Annotated-Code"><a href="#2-21-Type-Annotated-Code" class="headerlink" title="2.21 Type Annotated Code"></a>2.21 Type Annotated Code</h3><p>You can annotate Python 3 code with type hints according to<br><a href="https://www.python.org/dev/peps/pep-0484/" target="_blank" rel="noopener">PEP-484</a>, and type-check the code at<br>build time with a type checking tool like<br><a href="https://github.com/google/pytype" target="_blank" rel="noopener">pytype</a>.</p>
<p>Type annotations can be in the source or in a <a href="https://www.python.org/dev/peps/pep-0484/#stub-files" target="_blank" rel="noopener">stub pyi<br>file</a>. Whenever possible,<br>annotations should be in the source. Use pyi files for third-party or extension<br>modules.</p>
<p><a id="s2.21.1-definition"></a></p>
<h4 id="2-21-1-Definition"><a href="#2-21-1-Definition" class="headerlink" title="2.21.1 Definition"></a>2.21.1 Definition</h4><p>Type annotations (or “type hints”) are for function or method arguments and<br>return values:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(a: int)</span> -&gt; List[int]:</span></span><br></pre></td></tr></table></figure>
<p>You can also declare the type of a variable using a special comment:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = SomeFunc()  <span class="comment"># type: SomeType</span></span><br></pre></td></tr></table></figure>
<p><a id="s2.21.2-pros"></a></p>
<h4 id="2-21-2-Pros"><a href="#2-21-2-Pros" class="headerlink" title="2.21.2 Pros"></a>2.21.2 Pros</h4><p>Type annotations improve the readability and maintainability of your code. The<br>type checker will convert many runtime errors to build-time errors, and reduce<br>your ability to use <a href="#power-features">Power Features</a>.</p>
<p><a id="s2.21.3-cons"></a></p>
<h4 id="2-21-3-Cons"><a href="#2-21-3-Cons" class="headerlink" title="2.21.3 Cons"></a>2.21.3 Cons</h4><p>You will have to keep the type declarations up to date. You might see type errors that you think are valid code. Use of a <a href="https://github.com/google/pytype" target="_blank" rel="noopener">type checker</a><br>may reduce your ability to use <a href="#power-features">Power Features</a>.</p>
<p><a id="s2.21.4-decision"></a></p>
<h4 id="2-21-4-Decision"><a href="#2-21-4-Decision" class="headerlink" title="2.21.4 Decision"></a>2.21.4 Decision</h4><p>This highly depends on the complexity of your project. Give it a try.</p>
<p><a id="s3-python-style-rules">&lt;/a&gt;<br><a id="python-style-rules"></a></a></p>
<h2 id="3-Python-Style-Rules"><a href="#3-Python-Style-Rules" class="headerlink" title="3 Python Style Rules"></a>3 Python Style Rules</h2><p><a id="s3.1-semicolons">&lt;/a&gt;<br><a id="semicolons"></a></a></p>
<h3 id="3-1-Semicolons"><a href="#3-1-Semicolons" class="headerlink" title="3.1 Semicolons"></a>3.1 Semicolons</h3><p>Do not terminate your lines with semicolons, and do not use semicolons to put<br>two statements on the same line.</p>
<p><a id="s3.2-line-length">&lt;/a&gt;<br><a id="line-length"></a></a></p>
<h3 id="3-2-Line-length"><a href="#3-2-Line-length" class="headerlink" title="3.2 Line length"></a>3.2 Line length</h3><p>Maximum line length is <em>80 characters</em>.</p>
<p>Exceptions:</p>
<ul>
<li>Long import statements.</li>
<li>URLs, pathnames, or long flags in comments.</li>
<li>Long string module level constants not containing whitespace that would be<br>inconvenient to split across lines such as URLs or pathnames.</li>
<li>Pylint disable comments. (e.g.: <code># pylint: disable=invalid-name</code>)</li>
</ul>
<p>Do not use backslash line continuation except for <code>with</code> statements requiring<br>three or more context managers.</p>
<p>Make use of Python’s <a href="http://docs.python.org/reference/lexical_analysis.html#implicit-line-joining" target="_blank" rel="noopener">implicit line joining inside parentheses, brackets and<br>braces</a>.<br>If necessary, you can add an extra pair of parentheses around an expression.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Yes: foo_bar(self, width, height, color=<span class="string">'black'</span>, design=<span class="literal">None</span>, x=<span class="string">'foo'</span>,</span><br><span class="line">             emphasis=<span class="literal">None</span>, highlight=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">     <span class="keyword">if</span> (width == <span class="number">0</span> <span class="keyword">and</span> height == <span class="number">0</span> <span class="keyword">and</span></span><br><span class="line">         color == <span class="string">'red'</span> <span class="keyword">and</span> emphasis == <span class="string">'strong'</span>):</span><br></pre></td></tr></table></figure>
<p>When a literal string won’t fit on a single line, use parentheses for implicit<br>line joining.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x = (<span class="string">'This will build a very long long '</span></span><br><span class="line">     <span class="string">'long long long long long long string'</span>)</span><br></pre></td></tr></table></figure>
<p>Within comments, put long URLs on their own line if necessary.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Yes:  <span class="comment"># See details at</span></span><br><span class="line">      <span class="comment"># http://www.example.com/us/developer/documentation/api/content/v2.0/csv_file_name_extension_full_specification.html</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">No:  <span class="comment"># See details at</span></span><br><span class="line">     <span class="comment"># http://www.example.com/us/developer/documentation/api/content/\</span></span><br><span class="line">     <span class="comment"># v2.0/csv_file_name_extension_full_specification.html</span></span><br></pre></td></tr></table></figure>
<p>It is permissible to use backslash continuation when defining a <code>with</code> statement<br>whose expressions span three or more lines. For two lines of expressions, use a<br>nested <code>with</code> statement:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Yes:  <span class="keyword">with</span> very_long_first_expression_function() <span class="keyword">as</span> spam, \</span><br><span class="line">           very_long_second_expression_function() <span class="keyword">as</span> beans, \</span><br><span class="line">           third_thing() <span class="keyword">as</span> eggs:</span><br><span class="line">          place_order(eggs, beans, spam, beans)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">No:  <span class="keyword">with</span> VeryLongFirstExpressionFunction() <span class="keyword">as</span> spam, \</span><br><span class="line">          VeryLongSecondExpressionFunction() <span class="keyword">as</span> beans:</span><br><span class="line">       PlaceOrder(eggs, beans, spam, beans)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Yes:  <span class="keyword">with</span> very_long_first_expression_function() <span class="keyword">as</span> spam:</span><br><span class="line">          <span class="keyword">with</span> very_long_second_expression_function() <span class="keyword">as</span> beans:</span><br><span class="line">              place_order(beans, spam)</span><br></pre></td></tr></table></figure>
<p>Make note of the indentation of the elements in the line continuation examples<br>above; see the <a href="#s3.4-indentation">indentation</a> section for explanation.</p>
<p><a id="s3.3-parentheses">&lt;/a&gt;<br><a id="parentheses"></a></a></p>
<h3 id="3-3-Parentheses"><a href="#3-3-Parentheses" class="headerlink" title="3.3 Parentheses"></a>3.3 Parentheses</h3><p>Use parentheses sparingly.</p>
<p>It is fine, though not required, to use parentheses around tuples. Do not use<br>them in return statements or conditional statements unless using parentheses for<br>implied line continuation or to indicate a tuple.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Yes: <span class="keyword">if</span> foo:</span><br><span class="line">         bar()</span><br><span class="line">     <span class="keyword">while</span> x:</span><br><span class="line">         x = bar()</span><br><span class="line">     <span class="keyword">if</span> x <span class="keyword">and</span> y:</span><br><span class="line">         bar()</span><br><span class="line">     <span class="keyword">if</span> <span class="keyword">not</span> x:</span><br><span class="line">         bar()</span><br><span class="line">     <span class="comment"># For a 1 item tuple the ()s are more visually obvious than the comma.</span></span><br><span class="line">     onesie = (foo,)</span><br><span class="line">     <span class="keyword">return</span> foo</span><br><span class="line">     <span class="keyword">return</span> spam, beans</span><br><span class="line">     <span class="keyword">return</span> (spam, beans)</span><br><span class="line">     <span class="keyword">for</span> (x, y) <span class="keyword">in</span> dict.items(): ...</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">No:  <span class="keyword">if</span> (x):</span><br><span class="line">         bar()</span><br><span class="line">     <span class="keyword">if</span> <span class="keyword">not</span>(x):</span><br><span class="line">         bar()</span><br><span class="line">     <span class="keyword">return</span> (foo)</span><br></pre></td></tr></table></figure>
<p><a id="s3.4-indentation">&lt;/a&gt;<br><a id="indentation"></a></a></p>
<h3 id="3-4-Indentation"><a href="#3-4-Indentation" class="headerlink" title="3.4 Indentation"></a>3.4 Indentation</h3><p>Indent your code blocks with <em>4 spaces</em>.</p>
<p>Never use tabs or mix tabs and spaces. In cases of implied line continuation,<br>you should align wrapped elements either vertically, as per the examples in the<br><a href="#s3.2-line-length">line length</a> section; or using a hanging indent of 4 spaces,<br>in which case there should be nothing after the open parenthesis or bracket on<br>the first line.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Yes:   <span class="comment"># Aligned with opening delimiter</span></span><br><span class="line">       foo = long_function_name(var_one, var_two,</span><br><span class="line">                                var_three, var_four)</span><br><span class="line">       meal = (spam,</span><br><span class="line">               beans)</span><br><span class="line"></span><br><span class="line">       <span class="comment"># Aligned with opening delimiter in a dictionary</span></span><br><span class="line">       foo = &#123;</span><br><span class="line">           long_dictionary_key: value1 +</span><br><span class="line">                                value2,</span><br><span class="line">           ...</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment"># 4-space hanging indent; nothing on first line</span></span><br><span class="line">       foo = long_function_name(</span><br><span class="line">           var_one, var_two, var_three,</span><br><span class="line">           var_four)</span><br><span class="line">       meal = (</span><br><span class="line">           spam,</span><br><span class="line">           beans)</span><br><span class="line"></span><br><span class="line">       <span class="comment"># 4-space hanging indent in a dictionary</span></span><br><span class="line">       foo = &#123;</span><br><span class="line">           long_dictionary_key:</span><br><span class="line">               long_dictionary_value,</span><br><span class="line">           ...</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">No:    <span class="comment"># Stuff on first line forbidden</span></span><br><span class="line">       foo = long_function_name(var_one, var_two,</span><br><span class="line">           var_three, var_four)</span><br><span class="line">       meal = (spam,</span><br><span class="line">           beans)</span><br><span class="line"></span><br><span class="line">       <span class="comment"># 2-space hanging indent forbidden</span></span><br><span class="line">       foo = long_function_name(</span><br><span class="line">         var_one, var_two, var_three,</span><br><span class="line">         var_four)</span><br><span class="line"></span><br><span class="line">       <span class="comment"># No hanging indent in a dictionary</span></span><br><span class="line">       foo = &#123;</span><br><span class="line">           long_dictionary_key:</span><br><span class="line">           long_dictionary_value,</span><br><span class="line">           ...</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<p><a id="s3.4.1-trailing_comma">&lt;/a&gt;<br><a id="trailing_comma"></a></a></p>
<h3 id="3-4-1-Trailing-commas-in-sequences-of-items"><a href="#3-4-1-Trailing-commas-in-sequences-of-items" class="headerlink" title="3.4.1 Trailing commas in sequences of items?"></a>3.4.1 Trailing commas in sequences of items?</h3><p>Trailing commas in sequences of items are recommended only when the closing<br>container token <code>]</code>, <code>)</code>, or <code>}</code> does not appear on the same line as the final<br>element. The presence of a trailing comma is also used as a hint to our Python<br>code auto-formatter <a href="https://pypi.org/project/yapf/" target="_blank" rel="noopener">YAPF</a> to direct it to auto-format the container<br>of items to one item per line when the <code>,</code> after the final element is present.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Yes:   golomb3 = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>]</span><br><span class="line">Yes:   golomb4 = [</span><br><span class="line">           <span class="number">0</span>,</span><br><span class="line">           <span class="number">1</span>,</span><br><span class="line">           <span class="number">4</span>,</span><br><span class="line">           <span class="number">6</span>,</span><br><span class="line">       ]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">No:    golomb4 = [</span><br><span class="line">           <span class="number">0</span>,</span><br><span class="line">           <span class="number">1</span>,</span><br><span class="line">           <span class="number">4</span>,</span><br><span class="line">           <span class="number">6</span></span><br><span class="line">       ]</span><br></pre></td></tr></table></figure>
<p><a id="s3.5-blank-lines">&lt;/a&gt;<br><a id="blank-lines"></a></a></p>
<h3 id="3-5-Blank-Lines"><a href="#3-5-Blank-Lines" class="headerlink" title="3.5 Blank Lines"></a>3.5 Blank Lines</h3><p>Two blank lines between top-level definitions, be they function or class<br>definitions. One blank line between method definitions and between the <code>class</code><br>line and the first method. No blank line following a <code>def</code> line. Use single<br>blank lines as you judge appropriate within functions or methods.</p>
<p><a id="s3.6-whitespace">&lt;/a&gt;<br><a id="whitespace"></a></a></p>
<h3 id="3-6-Whitespace"><a href="#3-6-Whitespace" class="headerlink" title="3.6 Whitespace"></a>3.6 Whitespace</h3><p>Follow standard typographic rules for the use of spaces around punctuation.</p>
<p>No whitespace inside parentheses, brackets or braces.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Yes: spam(ham[<span class="number">1</span>], &#123;eggs: <span class="number">2</span>&#125;, [])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">No:  spam( ham[ <span class="number">1</span> ], &#123; eggs: <span class="number">2</span> &#125;, [ ] )</span><br></pre></td></tr></table></figure>
<p>No whitespace before a comma, semicolon, or colon. Do use whitespace after a<br>comma, semicolon, or colon, except at the end of the line.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Yes: <span class="keyword">if</span> x == <span class="number">4</span>:</span><br><span class="line">         print(x, y)</span><br><span class="line">     x, y = y, x</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">No:  <span class="keyword">if</span> x == <span class="number">4</span> :</span><br><span class="line">         print(x , y)</span><br><span class="line">     x , y = y , x</span><br></pre></td></tr></table></figure>
<p>No whitespace before the open paren/bracket that starts an argument list,<br>indexing or slicing.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Yes: spam(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">No:  spam (<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Yes: dict[<span class="string">'key'</span>] = list[index]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">No:  dict [<span class="string">'key'</span>] = list [index]</span><br></pre></td></tr></table></figure>
<p>Surround binary operators with a single space on either side for assignment<br>(<code>=</code>), comparisons (<code>==, &lt;, &gt;, !=, &lt;&gt;, &lt;=, &gt;=, in, not in, is, is not</code>), and<br>Booleans (<code>and, or, not</code>). Use your better judgment for the insertion of spaces<br>around arithmetic operators (<code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>//</code>, <code>%</code>, <code>**</code>, <code>@</code>).</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Yes: x == <span class="number">1</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">No:  x&lt;<span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>Never use spaces around <code>=</code> when passing keyword arguments or defining a default<br>parameter value, with one exception: <a href="#typing-default-values">when a type annotation is<br>present</a>, _do_ use spaces around the <code>=</code> for the default<br>parameter value.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Yes: <span class="function"><span class="keyword">def</span> <span class="title">complex</span><span class="params">(real, imag=<span class="number">0.0</span>)</span>:</span> <span class="keyword">return</span> Magic(r=real, i=imag)</span><br><span class="line">Yes: <span class="function"><span class="keyword">def</span> <span class="title">complex</span><span class="params">(real, imag: float = <span class="number">0.0</span>)</span>:</span> <span class="keyword">return</span> Magic(r=real, i=imag)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">No:  <span class="function"><span class="keyword">def</span> <span class="title">complex</span><span class="params">(real, imag = <span class="number">0.0</span>)</span>:</span> <span class="keyword">return</span> Magic(r = real, i = imag)</span><br><span class="line">No:  <span class="function"><span class="keyword">def</span> <span class="title">complex</span><span class="params">(real, imag: float=<span class="number">0.0</span>)</span>:</span> <span class="keyword">return</span> Magic(r = real, i = imag)</span><br></pre></td></tr></table></figure>
<p>Don’t use spaces to vertically align tokens on consecutive lines, since it<br>becomes a maintenance burden (applies to <code>:</code>, <code>#</code>, <code>=</code>, etc.):</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Yes:</span><br><span class="line">  foo = <span class="number">1000</span>  <span class="comment"># comment</span></span><br><span class="line">  long_name = <span class="number">2</span>  <span class="comment"># comment that should not be aligned</span></span><br><span class="line"></span><br><span class="line">  dictionary = &#123;</span><br><span class="line">      <span class="string">'foo'</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="string">'long_name'</span>: <span class="number">2</span>,</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">No:</span><br><span class="line">  foo       = <span class="number">1000</span>  <span class="comment"># comment</span></span><br><span class="line">  long_name = <span class="number">2</span>     <span class="comment"># comment that should not be aligned</span></span><br><span class="line"></span><br><span class="line">  dictionary = &#123;</span><br><span class="line">      <span class="string">'foo'</span>      : <span class="number">1</span>,</span><br><span class="line">      <span class="string">'long_name'</span>: <span class="number">2</span>,</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p><a id="Python_Interpreter">&lt;/a&gt;<br><a id="s3.7-shebang-line"></a><br><a id="shebang-line"></a></a></p>
<h3 id="3-7-Shebang-Line"><a href="#3-7-Shebang-Line" class="headerlink" title="3.7 Shebang Line"></a>3.7 Shebang Line</h3><p>Most <code>.py</code> files do not need to start with a <code>#!</code> line. Start the main file of a<br>program with<br><code>#!/usr/bin/python</code> with an optional single digit <code>2</code> or <code>3</code> suffix per<br><a href="https://www.google.com/url?sa=D&amp;q=http://www.python.org/dev/peps/pep-0394/" target="_blank" rel="noopener">PEP-394</a>.</p>
<p>This line is used by the kernel to find the Python interpreter, but is ignored<br>by Python when importing modules. It is only necessary on a file that will be<br>executed directly.</p>
<p><a id="s3.8-comments">&lt;/a&gt;<br><a id="comments"></a></a></p>
<h3 id="3-8-Comments-and-Docstrings"><a href="#3-8-Comments-and-Docstrings" class="headerlink" title="3.8 Comments and Docstrings"></a>3.8 Comments and Docstrings</h3><p>Be sure to use the right style for module, function, method docstrings and<br>inline comments.</p>
<p><a id="s3.8.1-comments-in-doc-strings">&lt;/a&gt;<br><a id="comments-in-doc-strings"></a></a></p>
<h4 id="3-8-1-Docstrings"><a href="#3-8-1-Docstrings" class="headerlink" title="3.8.1 Docstrings"></a>3.8.1 Docstrings</h4><p>Python uses _docstrings_ to document code. A docstring is a string that is the<br>first statement in a package, module, class or function. These strings can be<br>extracted automatically through the <code>__doc__</code> member of the object and are used<br>by <code>pydoc</code>.<br>(Try running <code>pydoc</code> on your module to see how it looks.) Always use the three<br>double-quote <code>&quot;&quot;&quot;</code> format for docstrings (per <a href="https://www.google.com/url?sa=D&amp;q=http://www.python.org/dev/peps/pep-0257/" target="_blank" rel="noopener">PEP<br>257</a>).<br>A docstring should be organized as a summary line (one physical line) terminated<br>by a period, question mark, or exclamation point, followed by a blank line,<br>followed by the rest of the docstring starting at the same cursor position as<br>the first quote of the first line. There are more formatting guidelines for<br>docstrings below.</p>
<p><a id="s3.8.2-comments-in-modules">&lt;/a&gt;<br><a id="comments-in-modules"></a></a></p>
<h4 id="3-8-2-Modules"><a href="#3-8-2-Modules" class="headerlink" title="3.8.2 Modules"></a>3.8.2 Modules</h4><p>Every file should contain license boilerplate. Choose the appropriate<br>boilerplate for the license used by the project (for example, Apache 2.0, BSD,<br>LGPL, GPL)</p>
<p><a id="s3.8.3-functions-and-methods">&lt;/a&gt;<br><a id="functions-and-methods"></a></a></p>
<h4 id="3-8-3-Functions-and-Methods"><a href="#3-8-3-Functions-and-Methods" class="headerlink" title="3.8.3 Functions and Methods"></a>3.8.3 Functions and Methods</h4><p>In this section, “function” means a method, function, or generator.</p>
<p>A function must have a docstring, unless it meets all of the following criteria:</p>
<ul>
<li>not externally visible</li>
<li>very short</li>
<li>obvious</li>
</ul>
<p>A docstring should give enough information to write a call to the function<br>without reading the function’s code. The docstring should be descriptive<br>(<code>&quot;&quot;&quot;Fetches rows from a Bigtable.&quot;&quot;&quot;</code>) rather than imperative<br>(<code>&quot;&quot;&quot;Fetch rows from a Bigtable.&quot;&quot;&quot;</code>). A docstring should describe the<br>function’s calling syntax and its semantics, not its implementation. For tricky<br>code, comments alongside the code are more appropriate than using docstrings.</p>
<p>A method that overrides a method from a base class may have a simple docstring<br>sending the reader to its overridden method’s docstring, such as <code>&quot;&quot;&quot;See base
class.&quot;&quot;&quot;</code>. The rationale is that there is no need to repeat in many places<br>documentation that is already present in the base method’s docstring. However,<br>if the overriding method’s behavior is substantially different from the<br>overridden method, or details need to be provided (e.g., documenting additional<br>side effects), a docstring with at least those differences is required on the<br>overriding method.</p>
<p>Certain aspects of a function should be documented in special sections, listed<br>below. Each section begins with a heading line, which ends with a colon.<br>Sections should be indented two spaces, except for the heading.</p>
<p><a id="doc-function-args"></a><br><a href="#doc-function-args"><em>Args:</em></a><br>:   List each parameter by name. A description should follow the name, and be<br>separated by a colon and a space. If the description is too long to fit on a<br>single 80-character line, use a hanging indent of 2 or 4 spaces (be<br>consistent with the rest of the file).<br><br>The description should include required type(s) if the code does not contain<br>a corresponding type annotation.<br><br>If a function accepts <code>*foo</code> (variable length argument lists) and/or <code>**bar</code><br>(arbitrary keyword arguments), they should be listed as <code>*foo</code> and <code>**bar</code>.</p>
<p><a id="doc-function-returns"></a><br><a href="#doc-function-returns"><em>Returns:</em> (or <em>Yields:</em> for generators)</a><br>:   Describe the type and semantics of the return value. If the function only<br>returns None, this section is not required. It may also be omitted if the<br>docstring starts with Returns or Yields (e.g.<br><code>&quot;&quot;&quot;Returns row from Bigtable as a tuple of strings.&quot;&quot;&quot;</code>) and the opening<br>sentence is sufficient to describe return value.</p>
<p><a id="doc-function-raises"></a><br><a href="#doc-function-raises"><em>Raises:</em></a><br>:   List all exceptions that are relevant to the interface.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fetch_bigtable_rows</span><span class="params">(big_table, keys, other_silly_variable=None)</span>:</span></span><br><span class="line">    <span class="string">"""Fetches rows from a Bigtable.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Retrieves rows pertaining to the given keys from the Table instance</span></span><br><span class="line"><span class="string">    represented by big_table.  Silly things may happen if</span></span><br><span class="line"><span class="string">    other_silly_variable is not None.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        big_table: An open Bigtable Table instance.</span></span><br><span class="line"><span class="string">        keys: A sequence of strings representing the key of each table row</span></span><br><span class="line"><span class="string">            to fetch.</span></span><br><span class="line"><span class="string">        other_silly_variable: Another optional variable, that has a much</span></span><br><span class="line"><span class="string">            longer name than the other args, and which does nothing.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        A dict mapping keys to the corresponding table row data</span></span><br><span class="line"><span class="string">        fetched. Each row is represented as a tuple of strings. For</span></span><br><span class="line"><span class="string">        example:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &#123;'Serak': ('Rigel VII', 'Preparer'),</span></span><br><span class="line"><span class="string">         'Zim': ('Irk', 'Invader'),</span></span><br><span class="line"><span class="string">         'Lrrr': ('Omicron Persei 8', 'Emperor')&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        If a key from the keys argument is missing from the dictionary,</span></span><br><span class="line"><span class="string">        then that row was not found in the table.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Raises:</span></span><br><span class="line"><span class="string">        IOError: An error occurred accessing the bigtable.Table object.</span></span><br><span class="line"><span class="string">    """</span></span><br></pre></td></tr></table></figure>
<p><a id="s3.8.4-comments-in-classes">&lt;/a&gt;<br><a id="comments-in-classes"></a></a></p>
<h4 id="3-8-4-Classes"><a href="#3-8-4-Classes" class="headerlink" title="3.8.4 Classes"></a>3.8.4 Classes</h4><p>Classes should have a docstring below the class definition describing the class.<br>If your class has public attributes, they should be documented here in an<br><code>Attributes</code> section and follow the same formatting as a<br><a href="#doc-function-args">function’s <code>Args</code></a> section.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleClass</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="string">"""Summary of class here.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Longer class information....</span></span><br><span class="line"><span class="string">    Longer class information....</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Attributes:</span></span><br><span class="line"><span class="string">        likes_spam: A boolean indicating if we like SPAM or not.</span></span><br><span class="line"><span class="string">        eggs: An integer count of the eggs we have laid.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, likes_spam=False)</span>:</span></span><br><span class="line">        <span class="string">"""Inits SampleClass with blah."""</span></span><br><span class="line">        self.likes_spam = likes_spam</span><br><span class="line">        self.eggs = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">public_method</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""Performs operation blah."""</span></span><br></pre></td></tr></table></figure>
<p><a id="comments-in-block-and-inline">&lt;/a&gt;<br><a id="s3.8.5-comments-in-block-and-inline"></a></a></p>
<h4 id="3-8-5-Block-and-Inline-Comments"><a href="#3-8-5-Block-and-Inline-Comments" class="headerlink" title="3.8.5 Block and Inline Comments"></a>3.8.5 Block and Inline Comments</h4><p>The final place to have comments is in tricky parts of the code. If you’re going<br>to have to explain it at the next <a href="http://en.wikipedia.org/wiki/Code_review" target="_blank" rel="noopener">code<br>review</a>, you should comment it<br>now. Complicated operations get a few lines of comments before the operations<br>commence. Non-obvious ones get comments at the end of the line.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># We use a weighted dictionary search to find out where i is in</span></span><br><span class="line"><span class="comment"># the array.  We extrapolate position based on the largest num</span></span><br><span class="line"><span class="comment"># in the array and the array size and then do binary search to</span></span><br><span class="line"><span class="comment"># get the exact number.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> i &amp; (i<span class="number">-1</span>) == <span class="number">0</span>:  <span class="comment"># True if i is 0 or a power of 2.</span></span><br></pre></td></tr></table></figure>
<p>To improve legibility, these comments should be at least 2 spaces away from the<br>code.</p>
<p>On the other hand, never describe the code. Assume the person reading the code<br>knows Python (though not what you’re trying to do) better than you do.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># BAD COMMENT: Now go through the b array and make sure whenever i occurs</span></span><br><span class="line"><span class="comment"># the next element is i+1</span></span><br></pre></td></tr></table></figure>
<!-- The next section is copied from the C++ style guide. -->
<p><a id="s3.8.6-punctuation-spelling-and-grammar">&lt;/a&gt;<br><a id="punctuation-spelling-and-grammar"></a></a></p>
<h4 id="3-8-6-Punctuation-Spelling-and-Grammar"><a href="#3-8-6-Punctuation-Spelling-and-Grammar" class="headerlink" title="3.8.6 Punctuation, Spelling and Grammar"></a>3.8.6 Punctuation, Spelling and Grammar</h4><p>Pay attention to punctuation, spelling, and grammar; it is easier to read<br>well-written comments than badly written ones.</p>
<p>Comments should be as readable as narrative text, with proper capitalization and<br>punctuation. In many cases, complete sentences are more readable than sentence<br>fragments. Shorter comments, such as comments at the end of a line of code, can<br>sometimes be less formal, but you should be consistent with your style.</p>
<p>Although it can be frustrating to have a code reviewer point out that you are<br>using a comma when you should be using a semicolon, it is very important that<br>source code maintain a high level of clarity and readability. Proper<br>punctuation, spelling, and grammar help with that goal.</p>
<p><a id="s3.9-classes">&lt;/a&gt;<br><a id="classes"></a></a></p>
<h3 id="3-9-Classes"><a href="#3-9-Classes" class="headerlink" title="3.9 Classes"></a>3.9 Classes</h3><p>If a class inherits from no other base classes, explicitly inherit from<br><code>object</code>. This also applies to nested classes.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Yes: <span class="class"><span class="keyword">class</span> <span class="title">SampleClass</span><span class="params">(object)</span>:</span></span><br><span class="line">         <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">     <span class="class"><span class="keyword">class</span> <span class="title">OuterClass</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">         <span class="class"><span class="keyword">class</span> <span class="title">InnerClass</span><span class="params">(object)</span>:</span></span><br><span class="line">             <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">     <span class="class"><span class="keyword">class</span> <span class="title">ChildClass</span><span class="params">(ParentClass)</span>:</span></span><br><span class="line">         <span class="string">"""Explicitly inherits from another class already."""</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">No: <span class="class"><span class="keyword">class</span> <span class="title">SampleClass</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">OuterClass</span>:</span></span><br><span class="line"></span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">InnerClass</span>:</span></span><br><span class="line">            <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p>Inheriting from <code>object</code> is needed to make properties work properly in Python 2<br>and can protect your code from potential incompatibility with Python 3. It also<br>defines special methods that implement the default semantics of objects<br>including <code>__new__</code>, <code>__init__</code>, <code>__delattr__</code>, <code>__getattribute__</code>,<br><code>__setattr__</code>, <code>__hash__</code>, <code>__repr__</code>, and <code>__str__</code>.</p>
<p><a id="s3.10-strings">&lt;/a&gt;<br><a id="strings"></a></a></p>
<h3 id="3-10-Strings"><a href="#3-10-Strings" class="headerlink" title="3.10 Strings"></a>3.10 Strings</h3><p>Use the <code>format</code> method or the <code>%</code> operator for formatting strings, even when<br>the parameters are all strings. Use your best judgement to decide between <code>+</code><br>and <code>%</code> (or <code>format</code>) though.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Yes: x = a + b</span><br><span class="line">     x = <span class="string">'%s, %s!'</span> % (imperative, expletive)</span><br><span class="line">     x = <span class="string">'&#123;&#125;, &#123;&#125;'</span>.format(first, second)</span><br><span class="line">     x = <span class="string">'name: %s; score: %d'</span> % (name, n)</span><br><span class="line">     x = <span class="string">'name: &#123;&#125;; score: &#123;&#125;'</span>.format(name, n)</span><br><span class="line">     x = <span class="string">f'name: <span class="subst">&#123;name&#125;</span>; score: <span class="subst">&#123;n&#125;</span>'</span>  <span class="comment"># Python 3.6+</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">No: x = <span class="string">'%s%s'</span> % (a, b)  <span class="comment"># use + in this case</span></span><br><span class="line">    x = <span class="string">'&#123;&#125;&#123;&#125;'</span>.format(a, b)  <span class="comment"># use + in this case</span></span><br><span class="line">    x = first + <span class="string">', '</span> + second</span><br><span class="line">    x = <span class="string">'name: '</span> + name + <span class="string">'; score: '</span> + str(n)</span><br></pre></td></tr></table></figure>
<p>Avoid using the <code>+</code> and <code>+=</code> operators to accumulate a string within a loop.<br>Since strings are immutable, this creates unnecessary temporary objects and<br>results in quadratic rather than linear running time. Instead, add each<br>substring to a list and <code>&#39;&#39;.join</code> the list after the loop terminates (or, write<br>each substring to a <code>io.BytesIO</code> buffer).</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Yes: items = [<span class="string">'&lt;table&gt;'</span>]</span><br><span class="line">     <span class="keyword">for</span> last_name, first_name <span class="keyword">in</span> employee_list:</span><br><span class="line">         items.append(<span class="string">'&lt;tr&gt;&lt;td&gt;%s, %s&lt;/td&gt;&lt;/tr&gt;'</span> % (last_name, first_name))</span><br><span class="line">     items.append(<span class="string">'&lt;/table&gt;'</span>)</span><br><span class="line">     employee_table = <span class="string">''</span>.join(items)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">No: employee_table = <span class="string">'&lt;table&gt;'</span></span><br><span class="line">    <span class="keyword">for</span> last_name, first_name <span class="keyword">in</span> employee_list:</span><br><span class="line">        employee_table += <span class="string">'&lt;tr&gt;&lt;td&gt;%s, %s&lt;/td&gt;&lt;/tr&gt;'</span> % (last_name, first_name)</span><br><span class="line">    employee_table += <span class="string">'&lt;/table&gt;'</span></span><br></pre></td></tr></table></figure>
<p>Be consistent with your choice of string quote character within a file. Pick <code>&#39;</code><br>or <code>&quot;</code> and stick with it. It is okay to use the other quote character on a<br>string to avoid the need to <code>\\</code> escape within the string. <code>gpylint</code> enforces<br>this.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Yes:</span><br><span class="line">  Python(<span class="string">'Why are you hiding your eyes?'</span>)</span><br><span class="line">  Gollum(<span class="string">"I'm scared of lint errors."</span>)</span><br><span class="line">  Narrator(<span class="string">'"Good!" thought a happy Python reviewer.'</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">No:</span><br><span class="line">  Python(<span class="string">"Why are you hiding your eyes?"</span>)</span><br><span class="line">  Gollum(<span class="string">'The lint. It burns. It burns us.'</span>)</span><br><span class="line">  Gollum(<span class="string">"Always the great lint. Watching. Watching."</span>)</span><br></pre></td></tr></table></figure>
<p>Prefer <code>&quot;&quot;&quot;</code> for multi-line strings rather than <code>&#39;&#39;&#39;</code>. Projects may choose to<br>use <code>&#39;&#39;&#39;</code> for all non-docstring multi-line strings if and only if they also use<br><code>&#39;</code> for regular strings. Docstrings must use <code>&quot;&quot;&quot;</code> regardless. Note that it is<br>often cleaner to use implicit line joining since multi-line strings do not flow<br>with the indentation of the rest of the program:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Yes:</span><br><span class="line">print(<span class="string">"This is much nicer.\n"</span></span><br><span class="line">      <span class="string">"Do it this way.\n"</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  No:</span><br><span class="line">    print(<span class="string">"""This is pretty ugly.</span></span><br><span class="line"><span class="string">Don't do this.</span></span><br><span class="line"><span class="string">"""</span>)</span><br></pre></td></tr></table></figure>
<p><a id="s3.11-files-and-sockets">&lt;/a&gt;<br><a id="files-and-sockets"></a></a></p>
<h3 id="3-11-Files-and-Sockets"><a href="#3-11-Files-and-Sockets" class="headerlink" title="3.11 Files and Sockets"></a>3.11 Files and Sockets</h3><p>Explicitly close files and sockets when done with them.</p>
<p>Leaving files, sockets or other file-like objects open unnecessarily has many<br>downsides:</p>
<ul>
<li>They may consume limited system resources, such as file descriptors. Code<br>that deals with many such objects may exhaust those resources unnecessarily<br>if they’re not returned to the system promptly after use.</li>
<li>Holding files open may prevent other actions such as moving or deleting<br>them.</li>
<li>Files and sockets that are shared throughout a program may inadvertently be<br>read from or written to after logically being closed. If they are actually<br>closed, attempts to read or write from them will throw exceptions, making<br>the problem known sooner.</li>
</ul>
<p>Furthermore, while files and sockets are automatically closed when the file<br>object is destructed, tying the lifetime of the file object to the state of the<br>file is poor practice:</p>
<ul>
<li>There are no guarantees as to when the runtime will actually run the file’s<br>destructor. Different Python implementations use different memory management<br>techniques, such as delayed Garbage Collection, which may increase the<br>object’s lifetime arbitrarily and indefinitely.</li>
<li>Unexpected references to the file, e.g. in globals or exception tracebacks,<br>may keep it around longer than intended.</li>
</ul>
<p>The preferred way to manage files is using the <a href="http://docs.python.org/reference/compound_stmts.html#the-with-statement" target="_blank" rel="noopener">“with”<br>statement</a>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">"hello.txt"</span>) <span class="keyword">as</span> hello_file:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> hello_file:</span><br><span class="line">        print(line)</span><br></pre></td></tr></table></figure>
<p>For file-like objects that do not support the “with” statement, use<br><code>contextlib.closing()</code>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> contextlib</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> contextlib.closing(urllib.urlopen(<span class="string">"http://www.python.org/"</span>)) <span class="keyword">as</span> front_page:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> front_page:</span><br><span class="line">        print(line)</span><br></pre></td></tr></table></figure>
<p><a id="s3.12-todo-comments">&lt;/a&gt;<br><a id="todo-comments"></a></a></p>
<h3 id="3-12-TODO-Comments"><a href="#3-12-TODO-Comments" class="headerlink" title="3.12 TODO Comments"></a>3.12 TODO Comments</h3><p>Use <code>TODO</code> comments for code that is temporary, a short-term solution, or<br>good-enough but not perfect.</p>
<p>A <code>TODO</code> comment begins with the string <code>TODO</code> in all caps and a parenthesized<br>name, e-mail address, or other identifier<br>of the person or issue with the best context about the problem. This is followed<br>by an explanation of what there is to do.</p>
<p>The purpose is to have a consistent <code>TODO</code> format that can be searched to find<br>out how to get more details. A <code>TODO</code> is not a commitment that the person<br>referenced will fix the problem. Thus when you create a<br><code>TODO</code>, it is almost always your name<br>that is given.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># TODO(kl@gmail.com): Use a "*" here for string repetition.</span></span><br><span class="line"><span class="comment"># TODO(Zeke) Change this to use relations.</span></span><br></pre></td></tr></table></figure>
<p>If your <code>TODO</code> is of the form “At a future date do something” make sure that you<br>either include a very specific date (“Fix by November 2009”) or a very specific<br>event (“Remove this code when all clients can handle XML responses.”).</p>
<p><a id="s3.13-imports-formatting">&lt;/a&gt;<br><a id="imports-formatting"></a></a></p>
<h3 id="3-13-Imports-formatting"><a href="#3-13-Imports-formatting" class="headerlink" title="3.13 Imports formatting"></a>3.13 Imports formatting</h3><p>Imports should be on separate lines.</p>
<p>E.g.:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Yes: <span class="keyword">import</span> os</span><br><span class="line">     <span class="keyword">import</span> sys</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">No:  <span class="keyword">import</span> os, sys</span><br></pre></td></tr></table></figure>
<p>Imports are always put at the top of the file, just after any module comments<br>and docstrings and before module globals and constants. Imports should be<br>grouped from most generic to least generic:</p>
<ol>
<li><p>Python standard library imports. For example:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://pypi.org/" target="_blank" rel="noopener">third-party</a><br>module or package imports. For example:</p>
</li>
</ol>
<pre><code><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br></pre></td></tr></table></figure>
</code></pre><ol>
<li>Code repository<br>sub-package imports. For example:</li>
</ol>
<pre><code><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> otherproject.ai <span class="keyword">import</span> mind</span><br></pre></td></tr></table></figure>
</code></pre><ol>
<li><strong>Deprecated:</strong> application-specific imports that are part of the same<br>top level<br>sub-package as this file. For example:</li>
</ol>
<pre><code><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> myproject.backend.hgwells <span class="keyword">import</span> time_machine</span><br></pre></td></tr></table></figure>

You may find older Google Python Style code doing this, but it is no longer
required.  **New code is encouraged not to bother with this.**  Simply
treat application-specific sub-package imports the same as other
sub-package imports.
</code></pre><p>Within each grouping, imports should be sorted lexicographically, ignoring case,<br>according to each module’s full package path. Code may optionally place a blank<br>line between import sections.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> collections</span><br><span class="line"><span class="keyword">import</span> queue</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> absl <span class="keyword">import</span> app</span><br><span class="line"><span class="keyword">from</span> absl <span class="keyword">import</span> flags</span><br><span class="line"><span class="keyword">import</span> bs4</span><br><span class="line"><span class="keyword">import</span> cryptography</span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> book.genres <span class="keyword">import</span> scifi</span><br><span class="line"><span class="keyword">from</span> myproject.backend.hgwells <span class="keyword">import</span> time_machine</span><br><span class="line"><span class="keyword">from</span> myproject.backend.state_machine <span class="keyword">import</span> main_loop</span><br><span class="line"><span class="keyword">from</span> otherproject.ai <span class="keyword">import</span> body</span><br><span class="line"><span class="keyword">from</span> otherproject.ai <span class="keyword">import</span> mind</span><br><span class="line"><span class="keyword">from</span> otherproject.ai <span class="keyword">import</span> soul</span><br><span class="line"></span><br><span class="line"><span class="comment"># Older style code may have these imports down here instead:</span></span><br><span class="line"><span class="comment">#from myproject.backend.hgwells import time_machine</span></span><br><span class="line"><span class="comment">#from myproject.backend.state_machine import main_loop</span></span><br></pre></td></tr></table></figure>
<p><a id="s3.14-statements">&lt;/a&gt;<br><a id="statements"></a></a></p>
<h3 id="3-14-Statements"><a href="#3-14-Statements" class="headerlink" title="3.14 Statements"></a>3.14 Statements</h3><p>Generally only one statement per line.</p>
<p>However, you may put the result of a test on the same line as the test only if<br>the entire statement fits on one line. In particular, you can never do so with<br><code>try</code>/<code>except</code> since the <code>try</code> and <code>except</code> can’t both fit on the same line, and<br>you can only do so with an <code>if</code> if there is no <code>else</code>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Yes:</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> foo: bar(foo)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">No:</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> foo: bar(foo)</span><br><span class="line">  <span class="keyword">else</span>:   baz(foo)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span>:               bar(foo)</span><br><span class="line">  <span class="keyword">except</span> ValueError: baz(foo)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span>:</span><br><span class="line">      bar(foo)</span><br><span class="line">  <span class="keyword">except</span> ValueError: baz(foo)</span><br></pre></td></tr></table></figure>
<p><a id="s3.15-access-control">&lt;/a&gt;<br><a id="access-control"></a></a></p>
<h3 id="3-15-Access-Control"><a href="#3-15-Access-Control" class="headerlink" title="3.15 Access Control"></a>3.15 Access Control</h3><p>If an accessor function would be trivial, you should use public variables<br>instead of accessor functions to avoid the extra cost of function calls in<br>Python. When more functionality is added you can use <code>property</code> to keep the<br>syntax consistent.</p>
<p>On the other hand, if access is more complex, or the cost of accessing the<br>variable is significant, you should use function calls (following the<br><a href="#s3.16-naming">Naming</a> guidelines) such as <code>get_foo()</code> and<br><code>set_foo()</code>. If the past behavior allowed access through a property, do not<br>bind the new accessor functions to the property. Any code still attempting to<br>access the variable by the old method should break visibly so they are made<br>aware of the change in complexity.</p>
<p><a id="s3.16-naming">&lt;/a&gt;<br><a id="naming"></a></a></p>
<h3 id="3-16-Naming"><a href="#3-16-Naming" class="headerlink" title="3.16 Naming"></a>3.16 Naming</h3><p><code>module_name</code>,<br><code>package_name</code>,<br><code>ClassName</code>,<br><code>method_name</code>,<br><code>ExceptionName</code>,<br><code>function_name</code>,<br><code>GLOBAL_CONSTANT_NAME</code>,<br><code>global_var_name</code>,<br><code>instance_var_name</code>,<br><code>function_parameter_name</code>,<br><code>local_var_name</code>.</p>
<p>Function names, variable names, and filenames should be descriptive; eschew<br>abbreviation. In particular, do not use abbreviations that are ambiguous or<br>unfamiliar to readers outside your project, and do not abbreviate by deleting<br>letters within a word.</p>
<p>Always use a <code>.py</code> filename extension. Never use dashes.</p>
<p><a id="s3.16.1-names-to-avoid">&lt;/a&gt;<br><a id="names-to-avoid"></a></a></p>
<h4 id="3-16-1-Names-to-Avoid"><a href="#3-16-1-Names-to-Avoid" class="headerlink" title="3.16.1 Names to Avoid"></a>3.16.1 Names to Avoid</h4><ul>
<li>single character names except for counters or iterators. You may use “e” as<br>an exception identifier in try/except statements.</li>
<li>dashes (<code>-</code>) in any package/module name</li>
<li><code>__double_leading_and_trailing_underscore__</code> names (reserved by Python)</li>
</ul>
<p><a id="s3.16.2-naming-conventions">&lt;/a&gt;<br><a id="naming-conventions"></a></a></p>
<h4 id="3-16-2-Naming-Convention"><a href="#3-16-2-Naming-Convention" class="headerlink" title="3.16.2 Naming Convention"></a>3.16.2 Naming Convention</h4><ul>
<li><p>“Internal” means internal to a module, or protected or private within a<br>class.</p>
</li>
<li><p>Prepending a single underscore (<code>_</code>) has some support for protecting module<br>variables and functions (not included with <code>from module import *</code>). While<br>prepending a double underscore (<code>__</code> aka “dunder”) to an instance variable<br>or method effectively makes the variable or method private to its class<br>(using name mangling) we discourage its use as it impacts readability and<br>testability and isn’t <em>really</em> private.</p>
</li>
<li><p>Place related classes and top-level functions together in a<br>module.<br>Unlike Java, there is no need to limit yourself to one class per module.</p>
</li>
<li><p>Use CapWords for class names, but lower_with_under.py for module names.<br>Although there are some old modules named CapWords.py, this is now<br>discouraged because it’s confusing when the module happens to be named after<br>a class. (“wait — did I write <code>import StringIO</code> or <code>from StringIO import
StringIO</code>?”)</p>
</li>
<li><p>Underscores may appear in <em>unittest</em> method names starting with <code>test</code> to<br>separate logical components of the name, even if those components use<br>CapWords. One possible pattern is <code>test&lt;MethodUnderTest&gt;_&lt;state&gt;</code>; for<br>example <code>testPop_EmptyStack</code> is okay. There is no One Correct Way to name<br>test methods.</p>
</li>
</ul>
<p><a id="s3.16.3-file-naming">&lt;/a&gt;<br><a id="file-naming"></a></a></p>
<h4 id="3-16-3-File-Naming"><a href="#3-16-3-File-Naming" class="headerlink" title="3.16.3 File Naming"></a>3.16.3 File Naming</h4><p>Python filenames must have a <code>.py</code> extension and must not contain dashes (<code>-</code>).<br>This allows them to be imported and unittested. If you want an executable to be<br>accessible without the extension, use a symbolic link or a simple bash wrapper<br>containing <code>exec &quot;$0.py&quot; &quot;$@&quot;</code>.</p>
<p><a id="s3.16.4-guidelines-derived-from-guidos-recommendations">&lt;/a&gt;<br><a id="guidelines-derived-from-guidos-recommendations"></a></a></p>
<h4 id="3-16-4-Guidelines-derived-from-Guido’s-Recommendations"><a href="#3-16-4-Guidelines-derived-from-Guido’s-Recommendations" class="headerlink" title="3.16.4 Guidelines derived from Guido’s Recommendations"></a>3.16.4 Guidelines derived from Guido’s Recommendations</h4><table rules="all" border="1" summary="Guidelines from Guido's Recommendations" cellspacing="2" cellpadding="2">

  <tr>
    <th>Type</th>
    <th>Public</th>
    <th>Internal</th>
  </tr>

  <tr>
    <td>Packages</td>
    <td><code>lower_with_under</code></td>
    <td></td>
  </tr>

  <tr>
    <td>Modules</td>
    <td><code>lower_with_under</code></td>
    <td><code>_lower_with_under</code></td>
  </tr>

  <tr>
    <td>Classes</td>
    <td><code>CapWords</code></td>
    <td><code>_CapWords</code></td>
  </tr>

  <tr>
    <td>Exceptions</td>
    <td><code>CapWords</code></td>
    <td></td>
  </tr>

  <tr>
    <td>Functions</td>
    <td><code>lower_with_under()</code></td>
    <td><code>_lower_with_under()</code></td>
  </tr>

  <tr>
    <td>Global/Class Constants</td>
    <td><code>CAPS_WITH_UNDER</code></td>
    <td><code>_CAPS_WITH_UNDER</code></td>
  </tr>

  <tr>
    <td>Global/Class Variables</td>
    <td><code>lower_with_under</code></td>
    <td><code>_lower_with_under</code></td>
  </tr>

  <tr>
    <td>Instance Variables</td>
    <td><code>lower_with_under</code></td>
    <td><code>_lower_with_under</code> (protected)</td>
  </tr>

  <tr>
    <td>Method Names</td>
    <td><code>lower_with_under()</code></td>
    <td><code>_lower_with_under()</code> (protected)</td>
  </tr>

  <tr>
    <td>Function/Method Parameters</td>
    <td><code>lower_with_under</code></td>
    <td></td>
  </tr>

  <tr>
    <td>Local Variables</td>
    <td><code>lower_with_under</code></td>
    <td></td>
  </tr>

</table>

<p>While Python supports making things private by using a leading double underscore<br><code>__</code> (aka. “dunder”) prefix on a name, this is discouraged. Prefer the use of a<br>single underscore. They are easier to type, read, and to access from small<br>unittests. Lint warnings take care of invalid access to protected members.</p>
<p><a id="s3.17-main">&lt;/a&gt;<br><a id="main"></a></a></p>
<h3 id="3-17-Main"><a href="#3-17-Main" class="headerlink" title="3.17 Main"></a>3.17 Main</h3><p>Even a file meant to be used as an executable should be importable and a mere<br>import should not have the side effect of executing the program’s main<br>functionality. The main functionality should be in a <code>main()</code> function.</p>
<p>In Python, <code>pydoc</code> as well as unit tests require modules to be importable. Your<br>code should always check <code>if __name__ == &#39;__main__&#39;</code> before executing your main<br>program so that the main program is not executed when the module is imported.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<p>All code at the top level will be executed when the module is imported. Be<br>careful not to call functions, create objects, or perform other operations that<br>should not be executed when the file is being <code>pydoc</code>ed.</p>
<p><a id="s3.18-function-length">&lt;/a&gt;<br><a id="function-length"></a></a></p>
<h3 id="3-18-Function-length"><a href="#3-18-Function-length" class="headerlink" title="3.18 Function length"></a>3.18 Function length</h3><p>Prefer small and focused functions.</p>
<p>We recognize that long functions are sometimes appropriate, so no hard limit is<br>placed on function length. If a function exceeds about 40 lines, think about<br>whether it can be broken up without harming the structure of the program.</p>
<p>Even if your long function works perfectly now, someone modifying it in a few<br>months may add new behavior. This could result in bugs that are hard to find.<br>Keeping your functions short and simple makes it easier for other people to read<br>and modify your code.</p>
<p>You could find long and complicated functions when working with<br>some code. Do not be intimidated by modifying existing code: if working with such<br>a function proves to be difficult, you find that errors are hard to debug, or<br>you want to use a piece of it in several different contexts, consider breaking<br>up the function into smaller and more manageable pieces.</p>
<p><a id="s3.19-type-annotations">&lt;/a&gt;<br><a id="type-annotations"></a></a></p>
<h3 id="3-19-Type-Annotations"><a href="#3-19-Type-Annotations" class="headerlink" title="3.19 Type Annotations"></a>3.19 Type Annotations</h3><p><a id="typing-general">&lt;/a&gt;<br><a id="s3.19.1-general"></a></a></p>
<h4 id="3-19-1-General-Rules"><a href="#3-19-1-General-Rules" class="headerlink" title="3.19.1 General Rules"></a>3.19.1 General Rules</h4><ul>
<li>Familiarize yourself with <a href="https://www.python.org/dev/peps/pep-0484/" target="_blank" rel="noopener">PEP-484</a>.</li>
<li>In methods, only annotate <code>self</code>, or <code>cls</code> if it is necessary for proper type<br>information. e.g., <code>@classmethod def create(cls: Type[T]) -&gt; T: return cls()</code></li>
<li>If any other variable or a returned type should not be expressed, use <code>Any</code>.</li>
<li>You are not required to annotate all the functions in a module.<ul>
<li>At least annotate your public APIs.</li>
<li>Use judgment to get to a good balance between safety and clarity on the<br>one hand, and flexibility on the other.</li>
<li>Annotate code that is prone to type-related errors (previous bugs or<br>complexity).</li>
<li>Annotate code that is hard to understand.</li>
<li>Annotate code as it becomes stable from a types perspective. In many<br>cases, you can annotate all the functions in mature code without losing<br>too much flexibility.</li>
</ul>
</li>
</ul>
<p><a id="s3.19.2-line-breaking">&lt;/a&gt;<br><a id="typing-line-breaking"></a></a></p>
<h4 id="3-19-2-Line-Breaking"><a href="#3-19-2-Line-Breaking" class="headerlink" title="3.19.2 Line Breaking"></a>3.19.2 Line Breaking</h4><p>Try to follow the existing <a href="#indentation">indentation</a> rules.</p>
<p>After annotating, many function signatures will become “one parameter per line”.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_method</span><span class="params">(self,</span></span></span><br><span class="line"><span class="function"><span class="params">              first_var: int,</span></span></span><br><span class="line"><span class="function"><span class="params">              second_var: Foo,</span></span></span><br><span class="line"><span class="function"><span class="params">              third_var: Optional[Bar])</span> -&gt; int:</span></span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>
<p>Always prefer breaking between variables, and not for example between variable<br>names and type annotations. However, if everything fits on the same line,<br>go for it.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_method</span><span class="params">(self, first_var: int)</span> -&gt; int:</span></span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>
<p>If the combination of the function name, the last parameter, and the return type<br>is too long, indent by 4 in a new line.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_method</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    self, first_var: int)</span> -&gt; Tuple[MyLongType1, MyLongType1]:</span></span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>
<p>When the return type does not fit on the same line as the last parameter, the<br>preferred way is to indent the parameters by 4 on a new line and align the<br>closing parenthesis with the def.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Yes:</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_method</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    self, **kw_args: Optional[MyLongType]</span></span></span><br><span class="line"><span class="function"><span class="params">)</span> -&gt; Dict[OtherLongType, MyLongType]:</span></span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>
<p><code>pylint</code> allows you to move the closing parenthesis to a new line and align<br>with the opening one, but this is less readable.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">No:</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_method</span><span class="params">(self,</span></span></span><br><span class="line"><span class="function"><span class="params">              **kw_args: Optional[MyLongType]</span></span></span><br><span class="line"><span class="function"><span class="params">             )</span> -&gt; Dict[OtherLongType, MyLongType]:</span></span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>
<p>As in the examples above, prefer not to break types. However, sometimes they are<br>too long to be on a single line (try to keep sub-types unbroken).</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_method</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    self,</span></span></span><br><span class="line"><span class="function"><span class="params">    first_var: Tuple[List[MyLongType1],</span></span></span><br><span class="line"><span class="function"><span class="params">                     List[MyLongType2]],</span></span></span><br><span class="line"><span class="function"><span class="params">    second_var: List[Dict[</span></span></span><br><span class="line"><span class="function"><span class="params">        MyLongType3, MyLongType4]])</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>
<p>If a single name and type is too long, consider using an<br><a href="#typing-aliases">alias</a> for the type. The last resort is to break after the<br>colon and indent by 4.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Yes:</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_function</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    long_variable_name:</span></span></span><br><span class="line"><span class="function"><span class="params">        long_module_name.LongTypeName,</span></span></span><br><span class="line"><span class="function"><span class="params">)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">No:</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_function</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    long_variable_name: long_module_name.</span></span></span><br><span class="line"><span class="function"><span class="params">        LongTypeName,</span></span></span><br><span class="line"><span class="function"><span class="params">)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>
<p><a id="s3.19.3-forward-declarations">&lt;/a&gt;<br><a id="typing-forward-declarations"></a></a></p>
<h4 id="3-19-3-Forward-Declarations"><a href="#3-19-3-Forward-Declarations" class="headerlink" title="3.19.3 Forward Declarations"></a>3.19.3 Forward Declarations</h4><p>If you need to use a class name from the same module that is not yet defined —<br>for example, if you need the class inside the class declaration, or if you use a<br>class that is defined below — use a string for the class name.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,</span></span></span><br><span class="line"><span class="function"><span class="params">               stack: List[<span class="string">"MyClass"</span>])</span> -&gt; <span class="keyword">None</span>:</span></span><br></pre></td></tr></table></figure>
<p><a id="s3.19.4-default-values">&lt;/a&gt;<br><a id="typing-default-values"></a></a></p>
<h4 id="3-19-4-Default-Values"><a href="#3-19-4-Default-Values" class="headerlink" title="3.19.4 Default Values"></a>3.19.4 Default Values</h4><p>As per<br><a href="https://www.python.org/dev/peps/pep-0008/#other-recommendations" target="_blank" rel="noopener">PEP-008</a>, use<br>spaces around the <code>=</code> _only_ for arguments that have both a type annotation and<br>a default value.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Yes:</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(a: int = <span class="number">0</span>)</span> -&gt; int:</span></span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">No:</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(a:int=<span class="number">0</span>)</span> -&gt; int:</span></span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>
<p><a id="s3.19.5-none-type">&lt;/a&gt;<br><a id="none-type"></a></a></p>
<h4 id="3-19-5-NoneType"><a href="#3-19-5-NoneType" class="headerlink" title="3.19.5 NoneType"></a>3.19.5 NoneType</h4><p>In the Python type system, <code>NoneType</code> is a “first class” type, and for typing<br>purposes, <code>None</code> is an alias for <code>NoneType</code>. If an argument can be <code>None</code>, it<br>has to be declared! You can use <code>Union</code>, but if there is only one other type,<br>use <code>Optional</code>.</p>
<p>Use explicit <code>Optional</code> instead of implicit <code>Optional</code>. Earlier versions of PEP<br>484 allowed <code>a: Text = None</code> to be interpretted as <code>a: Optional[Text] = None</code>,<br>but that is no longer the preferred behavior.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Yes:</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(a: Optional[Text], b: Optional[Text] = None)</span> -&gt; Text:</span></span><br><span class="line">  ...</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">multiple_nullable_union</span><span class="params">(a: Union[None, Text, int])</span> -&gt; Text</span></span><br><span class="line"><span class="function">  ...</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">No:</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">nullable_union</span><span class="params">(a: Union[None, Text])</span> -&gt; Text:</span></span><br><span class="line">  ...</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">implicit_optional</span><span class="params">(a: Text = None)</span> -&gt; Text:</span></span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>
<p><a id="s3.19.6-aliases">&lt;/a&gt;<br><a id="typing-aliases"></a></a></p>
<h4 id="3-19-6-Type-Aliases"><a href="#3-19-6-Type-Aliases" class="headerlink" title="3.19.6 Type Aliases"></a>3.19.6 Type Aliases</h4><p>You can declare aliases of complex types. The name of an alias should be<br>CapWorded. If the alias is used only in this module, it should be<br>_Private.</p>
<p>For example, if the name of module together with the type is too long:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_ShortName = module_with_long_name.TypeWithLongName</span><br><span class="line">ComplexMap = Mapping[Text, List[Tuple[int, int]]]</span><br></pre></td></tr></table></figure>
<p>Other examples are complex nested types and multiple return variables from a<br>function (as a tuple).</p>
<p><a id="s3.19.7-ignore">&lt;/a&gt;<br><a id="typing-ignore"></a></a></p>
<h4 id="3-19-7-Ignoring-Types"><a href="#3-19-7-Ignoring-Types" class="headerlink" title="3.19.7 Ignoring Types"></a>3.19.7 Ignoring Types</h4><p>You can disable type checking on a line with the special comment<br><code># type: ignore</code>.</p>
<p><code>pytype</code> has a disable option for specific errors (similar to lint):</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pytype: disable=attribute-error</span></span><br></pre></td></tr></table></figure>
<p><a id="s3.19.8-comments">&lt;/a&gt;<br><a id="typing-comments"></a></a></p>
<h4 id="3-19-8-Typing-internal-variables"><a href="#3-19-8-Typing-internal-variables" class="headerlink" title="3.19.8 Typing internal variables"></a>3.19.8 Typing internal variables</h4><p>If an internal variable has a type that is hard or impossible to infer, you can<br>supply it as a special comment:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = SomeUndecoratedFunction()  <span class="comment"># type: Foo</span></span><br></pre></td></tr></table></figure>
<p><a id="s3.19.9-tuples">&lt;/a&gt;<br><a id="typing-tuples"></a></a></p>
<h4 id="3-19-9-Tuples-vs-Lists"><a href="#3-19-9-Tuples-vs-Lists" class="headerlink" title="3.19.9 Tuples vs Lists"></a>3.19.9 Tuples vs Lists</h4><p>Unlike Lists, which can only have a single type, Tuples can have either a single<br>repeated type or a set number of elements with different types. The latter is<br>commonly used as return type from a function.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]  <span class="comment"># type: List[int]</span></span><br><span class="line">b = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)  <span class="comment"># type: Tuple[int, ...]</span></span><br><span class="line">c = (<span class="number">1</span>, <span class="string">"2"</span>, <span class="number">3.5</span>)  <span class="comment"># type: Tuple[int, Text, float]</span></span><br></pre></td></tr></table></figure>
<p><a id="s3.19.10-type-var">&lt;/a&gt;<br><a id="typing-type-var"></a></a></p>
<h4 id="3-19-10-TypeVar"><a href="#3-19-10-TypeVar" class="headerlink" title="3.19.10 TypeVar"></a>3.19.10 TypeVar</h4><p>The Python type system has<br><a href="https://www.python.org/dev/peps/pep-0484/#generics" target="_blank" rel="noopener">generics</a>. The factory<br>function <code>TypeVar</code> is a common way to use them.</p>
<p>Example:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> List, TypeVar</span><br><span class="line">T = TypeVar(<span class="string">"T"</span>)</span><br><span class="line">...</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">next</span><span class="params">(l: List[T])</span> -&gt; T:</span></span><br><span class="line">  <span class="keyword">return</span> l.pop()</span><br></pre></td></tr></table></figure>
<p>A TypeVar can be constrained:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">AddableType = TypeVar(<span class="string">"AddableType"</span>, int, float, Text)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(a: AddableType, b: AddableType)</span> -&gt; AddableType:</span></span><br><span class="line">  <span class="keyword">return</span> a + b</span><br></pre></td></tr></table></figure>
<p>A common predefined type variable in the <code>typing</code> module is <code>AnyStr</code>. Use it for<br>multiple annotations that can be <code>bytes</code> or <code>unicode</code> and must all be the same<br>type.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> AnyStr</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_length</span><span class="params">(x: AnyStr)</span> -&gt; AnyStr:</span></span><br><span class="line">  <span class="keyword">if</span> len(x) &lt;= <span class="number">42</span>:</span><br><span class="line">    <span class="keyword">return</span> x</span><br><span class="line">  <span class="keyword">raise</span> ValueError()</span><br></pre></td></tr></table></figure>
<p><a id="s3.19.11-strings">&lt;/a&gt;<br><a id="typing-strings"></a></a></p>
<h4 id="3-19-11-String-types"><a href="#3-19-11-String-types" class="headerlink" title="3.19.11 String types"></a>3.19.11 String types</h4><p>The proper type for annotating strings depends on what versions of Python the<br>code is intended for.</p>
<p>For Python 3 only code, prefer to use <code>str</code>. <code>Text</code> is also acceptable. Be<br>consistent in using one or the other.</p>
<p>For Python 2 compatible code, use <code>Text</code>. In some rare cases, <code>str</code> may make<br>sense; typically to aid compatiblity when the return types aren’t the same<br>between the two Python versions. Avoid using <code>unicode</code>: it doesn’t exist in<br>Python 3.</p>
<p>The reason this discreprency exists is because <code>str</code> means different things<br>depending on the Python version.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">No:</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">py2_code</span><span class="params">(x: str)</span> -&gt; unicode:</span></span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>
<p>For code that deals with binary data, use <code>bytes</code>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">deals_with_binary_data</span><span class="params">(x: bytes)</span> -&gt; bytes:</span></span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>
<p>For Python 2 compatible code that processes text data (<code>str</code> or <code>unicode</code> in<br>Python 2, <code>str</code> in Python 3), use <code>Text</code>. For Python 3 only code that process<br>text data, prefer <code>str</code>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Text</span><br><span class="line">...</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">py2_compatible</span><span class="params">(x: Text)</span> -&gt; Text:</span></span><br><span class="line">  ...</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">py3_only</span><span class="params">(x: str)</span> -&gt; str:</span></span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>
<p>If the type can be either bytes or text, use <code>Union</code>, with the appropriate text<br>type.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Text, Union</span><br><span class="line">...</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">py2_compatible</span><span class="params">(x: Union[bytes, Text])</span> -&gt; Union[bytes, Text]:</span></span><br><span class="line">  ...</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">py3_only</span><span class="params">(x: Union[bytes, str])</span> -&gt; Union[bytes, str]:</span></span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>
<p>If all the string types of a function are always the same, for example if the<br>return type is the same as the argument type in the code above, use<br><a href="#typing-type-var">AnyStr</a>.</p>
<p>Writing it like this will simplify the process of porting the code to Python 3.</p>
<p><a id="s3.19.12-imports">&lt;/a&gt;<br><a id="typing-imports"></a></a></p>
<h4 id="3-19-12-Imports-For-Typing"><a href="#3-19-12-Imports-For-Typing" class="headerlink" title="3.19.12 Imports For Typing"></a>3.19.12 Imports For Typing</h4><p>For classes from the <code>typing</code> module, always import the class itself. You are<br>explicitly allowed to import multiple specific classes on one line from the<br><code>typing</code> module. Ex:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Any, Dict, Optional</span><br></pre></td></tr></table></figure>
<p>Given that this way of importing from <code>typing</code> adds items to the local<br>namespace, any names in <code>typing</code> should be treated similarly to keywords, and<br>not be defined in your Python code, typed or not. If there is a collision<br>between a type and an existing name in a module, import it using<br><code>import x as y</code>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Any <span class="keyword">as</span> AnyType</span><br></pre></td></tr></table></figure>
<p><a id="s3.19.13-conditional-imports">&lt;/a&gt;<br><a id="typing-conditional-imports"></a></a></p>
<h4 id="3-19-13-Conditional-Imports"><a href="#3-19-13-Conditional-Imports" class="headerlink" title="3.19.13 Conditional Imports"></a>3.19.13 Conditional Imports</h4><p>Use conditional imports only in exceptional cases where the additional imports<br>needed for type checking must be avoided at runtime. This pattern is<br>discouraged; alternatives such as refactoring the code to allow top level<br>imports should be preferred.</p>
<p>Imports that are needed only for type annotations can be placed within an<br><code>if TYPE_CHECKING:</code> block.</p>
<ul>
<li>Conditionally imported types need to be referenced as strings, to be<br>forward compatible with Python 3.6 where the annotation expressions are<br>actually evaluated.</li>
<li>Only entities that are used solely for typing should be defined here; this<br>includes aliases. Otherwise it will be a runtime error, as the module will<br>not be imported at runtime.</li>
<li>The block should be right after all the normal imports.</li>
<li>There should be no empty lines in the typing imports list.</li>
<li>Sort this list as if it were a regular imports list.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> typing</span><br><span class="line"><span class="keyword">if</span> typing.TYPE_CHECKING:</span><br><span class="line">  <span class="keyword">import</span> sketch</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x: <span class="string">"sketch.Sketch"</span>)</span>:</span> ...</span><br></pre></td></tr></table></figure>
<p><a id="s3.19.14-circular-deps">&lt;/a&gt;<br><a id="typing-circular-deps"></a></a></p>
<h4 id="3-19-14-Circular-Dependencies"><a href="#3-19-14-Circular-Dependencies" class="headerlink" title="3.19.14 Circular Dependencies"></a>3.19.14 Circular Dependencies</h4><p>Circular dependencies that are caused by typing are code smells. Such code is a<br>good candidate for refactoring. Although technically it is possible to keep<br>circular dependencies, the <a href="#typing-build-deps">build system</a> will not let you<br>do so because each module has to depend on the other.</p>
<p>Replace modules that create circular dependency imports with <code>Any</code>. Set an<br><a href="#typing-aliases">alias</a> with a meaningful name, and use the real type name from<br>this module (any attribute of Any is Any). Alias definitions should be separated<br>from the last import by one line.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Any</span><br><span class="line"></span><br><span class="line">some_mod = Any  <span class="comment"># some_mod.py imports this module.</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_method</span><span class="params">(self, var: some_mod.SomeType)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>
<p><a id="typing-generics">&lt;/a&gt;<br><a id="s3.19.15-generics"></a></a></p>
<h4 id="3-19-15-Generics"><a href="#3-19-15-Generics" class="headerlink" title="3.19.15 Generics"></a>3.19.15 Generics</h4><p>When annotating, prefer to specify type parameters for generic types; otherwise,<br><a href="https://www.python.org/dev/peps/pep-0484/#the-any-type" target="_blank" rel="noopener">the generics’ parameters will be assumed to be <code>Any</code></a>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_names</span><span class="params">(employee_ids: List[int])</span> -&gt; Dict[int, Any]:</span></span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># These are both interpreted as get_names(employee_ids: List[Any]) -&gt; Dict[Any, Any]</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_names</span><span class="params">(employee_ids: list)</span> -&gt; Dict:</span></span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_names</span><span class="params">(employee_ids: List)</span> -&gt; Dict:</span></span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>
<p>If the best type parameter for a generic is <code>Any</code>, make it explicit, but<br>remember that in many cases <a href="#typing-type-var"><code>TypeVar</code></a> might be more<br>appropriate:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_names</span><span class="params">(employee_ids: List[Any])</span> -&gt; Dict[Any, Text]:</span></span><br><span class="line">  <span class="string">"""Returns a mapping from employee ID to employee name for given IDs."""</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">T = TypeVar(<span class="string">'T'</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_names</span><span class="params">(employee_ids: List[T])</span> -&gt; Dict[T, Text]:</span></span><br><span class="line">  <span class="string">"""Returns a mapping from employee ID to employee name for given IDs."""</span></span><br></pre></td></tr></table></figure>
<h2 id="4-Parting-Words"><a href="#4-Parting-Words" class="headerlink" title="4 Parting Words"></a>4 Parting Words</h2><p><em>BE CONSISTENT</em>.</p>
<p>If you’re editing code, take a few minutes to look at the code around you and<br>determine its style. If they use spaces around all their arithmetic operators,<br>you should too. If their comments have little boxes of hash marks around them,<br>make your comments have little boxes of hash marks around them too.</p>
<p>The point of having style guidelines is to have a common vocabulary of coding so<br>people can concentrate on what you’re saying rather than on how you’re saying<br>it. We present global style rules here so people know the vocabulary, but local<br>style is also important. If code you add to a file looks drastically different<br>from the existing code around it, it throws readers out of their rhythm when<br>they go to read it. Avoid this.</p>

      
    </div>

    
    <div>
      
        
<div class="my_post_copyright">
  <script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>
  
  <!-- JS库 sweetalert 可修改路径 -->
  <script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <p><span>本文标题:</span><a href="/posts/1894126926.html">Google Python Style Guide</a></p>
  <p><span>文章作者:</span><a href="/" title="访问 Joseph 的个人博客">Joseph</a></p>
  <p><span>发布时间:</span>2019年04月30日 - 20:04</p>
  <p><span>最后更新:</span>2019年04月30日 - 20:04</p>
  <p><span>原始链接:</span><a href="/posts/1894126926.html" title="Google Python Style Guide">https://jacksonleon.gitee.io/posts/1894126926.html</a>
    <span class="copy-path" title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="https://jacksonleon.gitee.io/posts/1894126926.html" aria-label="复制成功！"></i></span>
  </p>
  <p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。</p>  
</div>
<script> 
    var clipboard = new Clipboard('.fa-clipboard');
    $(".fa-clipboard").click(function(){
      clipboard.on('success', function(){
        swal({   
          title: "",   
          text: '复制成功',
          icon: "success", 
          showConfirmButton: true
          });
    });
    });  
</script>

      
    </div>
    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Python/" rel="tag"><i class="fa fa-tag"></i> Python</a>
          
            <a href="/tags/Reproduce/" rel="tag"><i class="fa fa-tag"></i> Reproduce</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/posts/3514606856.html" rel="prev" title="Pytorch Style Guide">
                <i class="fa fa-chevron-left"></i> Pytorch Style Guide
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/posts/2218408717.html" rel="next" title="「吴恩达机器学习」（三）">
                「吴恩达机器学习」（三） <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
            <a href="/">
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="Joseph">
            </a>
            
              <p class="site-author-name" itemprop="name">Joseph</p>
              <p class="site-description motion-element" itemprop="description">Love what you do, do what you love.</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">60</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">42</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">41</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/JacksonLeon" title="GitHub &rarr; https://github.com/JacksonLeon" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:pumbjackson@gmail.com" title="E-Mail &rarr; mailto:pumbjackson@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                推荐阅读
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://jacksonleon.github.io/posts/3890174064.html" title="https://jacksonleon.github.io/posts/3890174064.html" rel="noopener" target="_blank">Git Note</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://jacksonleon.github.io/posts/1999510617.html" title="https://jacksonleon.github.io/posts/1999510617.html" rel="noopener" target="_blank">Python Note</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://jacksonleon.github.io/posts/3307335557.html" title="https://jacksonleon.github.io/posts/3307335557.html" rel="noopener" target="_blank">Blog With Hexo</a>
                  </li>
                
              </ul>
            <div id="days"></div>
<script>
function show_date_time(){
window.setTimeout("show_date_time()", 1000);
BirthDay=new Date("01/01/2018 00:00:00");
today=new Date();
timeold=(today.getTime()-BirthDay.getTime());
sectimeold=timeold/1000
secondsold=Math.floor(sectimeold);
msPerDay=24*60*60*1000
e_daysold=timeold/msPerDay
daysold=Math.floor(e_daysold);
e_hrsold=(e_daysold-daysold)*24;
hrsold=setzero(Math.floor(e_hrsold));
e_minsold=(e_hrsold-hrsold)*60;
minsold=setzero(Math.floor((e_hrsold-hrsold)*60));
seconds=setzero(Math.floor((e_minsold-minsold)*60));
document.getElementById('days').innerHTML="已运行 "+daysold+" 天 "+hrsold+" 小时 "+minsold+" 分 "+seconds+" 秒";
}
function setzero(i){
if (i<10)
{i="0" + i};
return i;
}
show_date_time();
</script>
            </div>
          

          
            
          
        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Google-Python-Style-Guide"><span class="nav-number">1.</span> <span class="nav-text">Google Python Style Guide</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-Background"><span class="nav-number">1.1.</span> <span class="nav-text">1 Background</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-Python-Language-Rules"><span class="nav-number">1.2.</span> <span class="nav-text">2 Python Language Rules</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-Lint"><span class="nav-number">1.2.1.</span> <span class="nav-text">2.1 Lint</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-1-Definition"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">2.1.1 Definition</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-2-Pros"><span class="nav-number">1.2.1.2.</span> <span class="nav-text">2.1.2 Pros</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-3-Cons"><span class="nav-number">1.2.1.3.</span> <span class="nav-text">2.1.3 Cons</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-4-Decision"><span class="nav-number">1.2.1.4.</span> <span class="nav-text">2.1.4 Decision</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-Imports"><span class="nav-number">1.2.2.</span> <span class="nav-text">2.2 Imports</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-1-Definition"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">2.2.1 Definition</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-2-Pros"><span class="nav-number">1.2.2.2.</span> <span class="nav-text">2.2.2 Pros</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-3-Cons"><span class="nav-number">1.2.2.3.</span> <span class="nav-text">2.2.3 Cons</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-4-Decision"><span class="nav-number">1.2.2.4.</span> <span class="nav-text">2.2.4 Decision</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-Packages"><span class="nav-number">1.2.3.</span> <span class="nav-text">2.3 Packages</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-1-Pros"><span class="nav-number">1.2.3.1.</span> <span class="nav-text">2.3.1 Pros</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-2-Cons"><span class="nav-number">1.2.3.2.</span> <span class="nav-text">2.3.2 Cons</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-3-Decision"><span class="nav-number">1.2.3.3.</span> <span class="nav-text">2.3.3 Decision</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-Exceptions"><span class="nav-number">1.2.4.</span> <span class="nav-text">2.4 Exceptions</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4-1-Definition"><span class="nav-number">1.2.4.1.</span> <span class="nav-text">2.4.1 Definition</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4-2-Pros"><span class="nav-number">1.2.4.2.</span> <span class="nav-text">2.4.2 Pros</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4-3-Cons"><span class="nav-number">1.2.4.3.</span> <span class="nav-text">2.4.3 Cons</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4-4-Decision"><span class="nav-number">1.2.4.4.</span> <span class="nav-text">2.4.4 Decision</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-Global-variables"><span class="nav-number">1.2.5.</span> <span class="nav-text">2.5 Global variables</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-5-1-Definition"><span class="nav-number">1.2.5.1.</span> <span class="nav-text">2.5.1 Definition</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-5-2-Pros"><span class="nav-number">1.2.5.2.</span> <span class="nav-text">2.5.2 Pros</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-5-3-Cons"><span class="nav-number">1.2.5.3.</span> <span class="nav-text">2.5.3 Cons</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-5-4-Decision"><span class="nav-number">1.2.5.4.</span> <span class="nav-text">2.5.4 Decision</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-6-Nested-Local-Inner-Classes-and-Functions"><span class="nav-number">1.2.6.</span> <span class="nav-text">2.6 Nested/Local/Inner Classes and Functions</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-6-1-Definition"><span class="nav-number">1.2.6.1.</span> <span class="nav-text">2.6.1 Definition</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-6-2-Pros"><span class="nav-number">1.2.6.2.</span> <span class="nav-text">2.6.2 Pros</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-6-3-Cons"><span class="nav-number">1.2.6.3.</span> <span class="nav-text">2.6.3 Cons</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-6-4-Decision"><span class="nav-number">1.2.6.4.</span> <span class="nav-text">2.6.4 Decision</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-7-Comprehensions-amp-Generator-Expressions"><span class="nav-number">1.2.7.</span> <span class="nav-text">2.7 Comprehensions &amp; Generator Expressions</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-7-1-Definition"><span class="nav-number">1.2.7.1.</span> <span class="nav-text">2.7.1 Definition</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-7-2-Pros"><span class="nav-number">1.2.7.2.</span> <span class="nav-text">2.7.2 Pros</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-7-3-Cons"><span class="nav-number">1.2.7.3.</span> <span class="nav-text">2.7.3 Cons</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-7-4-Decision"><span class="nav-number">1.2.7.4.</span> <span class="nav-text">2.7.4 Decision</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-8-Default-Iterators-and-Operators"><span class="nav-number">1.2.8.</span> <span class="nav-text">2.8 Default Iterators and Operators</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-8-1-Definition"><span class="nav-number">1.2.8.1.</span> <span class="nav-text">2.8.1 Definition</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-8-2-Pros"><span class="nav-number">1.2.8.2.</span> <span class="nav-text">2.8.2 Pros</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-8-3-Cons"><span class="nav-number">1.2.8.3.</span> <span class="nav-text">2.8.3 Cons</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-8-4-Decision"><span class="nav-number">1.2.8.4.</span> <span class="nav-text">2.8.4 Decision</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-9-Generators"><span class="nav-number">1.2.9.</span> <span class="nav-text">2.9 Generators</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-9-1-Definition"><span class="nav-number">1.2.9.1.</span> <span class="nav-text">2.9.1 Definition</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-9-2-Pros"><span class="nav-number">1.2.9.2.</span> <span class="nav-text">2.9.2 Pros</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-9-3-Cons"><span class="nav-number">1.2.9.3.</span> <span class="nav-text">2.9.3 Cons</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-9-4-Decision"><span class="nav-number">1.2.9.4.</span> <span class="nav-text">2.9.4 Decision</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-10-Lambda-Functions"><span class="nav-number">1.2.10.</span> <span class="nav-text">2.10 Lambda Functions</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-10-1-Definition"><span class="nav-number">1.2.10.1.</span> <span class="nav-text">2.10.1 Definition</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-10-2-Pros"><span class="nav-number">1.2.10.2.</span> <span class="nav-text">2.10.2 Pros</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-10-3-Cons"><span class="nav-number">1.2.10.3.</span> <span class="nav-text">2.10.3 Cons</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-10-4-Decision"><span class="nav-number">1.2.10.4.</span> <span class="nav-text">2.10.4 Decision</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-11-Conditional-Expressions"><span class="nav-number">1.2.11.</span> <span class="nav-text">2.11 Conditional Expressions</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-11-1-Definition"><span class="nav-number">1.2.11.1.</span> <span class="nav-text">2.11.1 Definition</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-11-2-Pros"><span class="nav-number">1.2.11.2.</span> <span class="nav-text">2.11.2 Pros</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-11-3-Cons"><span class="nav-number">1.2.11.3.</span> <span class="nav-text">2.11.3 Cons</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-11-4-Decision"><span class="nav-number">1.2.11.4.</span> <span class="nav-text">2.11.4 Decision</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-12-Default-Argument-Values"><span class="nav-number">1.2.12.</span> <span class="nav-text">2.12 Default Argument Values</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-12-1-Definition"><span class="nav-number">1.2.12.1.</span> <span class="nav-text">2.12.1 Definition</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-12-2-Pros"><span class="nav-number">1.2.12.2.</span> <span class="nav-text">2.12.2 Pros</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-12-3-Cons"><span class="nav-number">1.2.12.3.</span> <span class="nav-text">2.12.3 Cons</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-12-4-Decision"><span class="nav-number">1.2.12.4.</span> <span class="nav-text">2.12.4 Decision</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-13-Properties"><span class="nav-number">1.2.13.</span> <span class="nav-text">2.13 Properties</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-13-1-Definition"><span class="nav-number">1.2.13.1.</span> <span class="nav-text">2.13.1 Definition</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-13-2-Pros"><span class="nav-number">1.2.13.2.</span> <span class="nav-text">2.13.2 Pros</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-13-3-Cons"><span class="nav-number">1.2.13.3.</span> <span class="nav-text">2.13.3 Cons</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-13-4-Decision"><span class="nav-number">1.2.13.4.</span> <span class="nav-text">2.13.4 Decision</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-14-True-False-evaluations"><span class="nav-number">1.2.14.</span> <span class="nav-text">2.14 True/False evaluations</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-14-1-Definition"><span class="nav-number">1.2.14.1.</span> <span class="nav-text">2.14.1 Definition</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-14-2-Pros"><span class="nav-number">1.2.14.2.</span> <span class="nav-text">2.14.2 Pros</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-14-3-Cons"><span class="nav-number">1.2.14.3.</span> <span class="nav-text">2.14.3 Cons</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-14-4-Decision"><span class="nav-number">1.2.14.4.</span> <span class="nav-text">2.14.4 Decision</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-15-Deprecated-Language-Features"><span class="nav-number">1.2.15.</span> <span class="nav-text">2.15 Deprecated Language Features</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-15-1-Definition"><span class="nav-number">1.2.15.1.</span> <span class="nav-text">2.15.1 Definition</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-15-2-Decision"><span class="nav-number">1.2.15.2.</span> <span class="nav-text">2.15.2 Decision</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-16-Lexical-Scoping"><span class="nav-number">1.2.16.</span> <span class="nav-text">2.16 Lexical Scoping</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-16-1-Definition"><span class="nav-number">1.2.16.1.</span> <span class="nav-text">2.16.1 Definition</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-16-2-Pros"><span class="nav-number">1.2.16.2.</span> <span class="nav-text">2.16.2 Pros</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-16-3-Cons"><span class="nav-number">1.2.16.3.</span> <span class="nav-text">2.16.3 Cons</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-16-4-Decision"><span class="nav-number">1.2.16.4.</span> <span class="nav-text">2.16.4 Decision</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-17-Function-and-Method-Decorators"><span class="nav-number">1.2.17.</span> <span class="nav-text">2.17 Function and Method Decorators</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-17-1-Definition"><span class="nav-number">1.2.17.1.</span> <span class="nav-text">2.17.1 Definition</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-17-2-Pros"><span class="nav-number">1.2.17.2.</span> <span class="nav-text">2.17.2 Pros</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-17-3-Cons"><span class="nav-number">1.2.17.3.</span> <span class="nav-text">2.17.3 Cons</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-17-4-Decision"><span class="nav-number">1.2.17.4.</span> <span class="nav-text">2.17.4 Decision</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-18-Threading"><span class="nav-number">1.2.18.</span> <span class="nav-text">2.18 Threading</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-19-Power-Features"><span class="nav-number">1.2.19.</span> <span class="nav-text">2.19 Power Features</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-19-1-Definition"><span class="nav-number">1.2.19.1.</span> <span class="nav-text">2.19.1 Definition</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-19-2-Pros"><span class="nav-number">1.2.19.2.</span> <span class="nav-text">2.19.2 Pros</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-19-3-Cons"><span class="nav-number">1.2.19.3.</span> <span class="nav-text">2.19.3 Cons</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-19-4-Decision"><span class="nav-number">1.2.19.4.</span> <span class="nav-text">2.19.4 Decision</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-20-Modern-Python-Python-3-and-from-future-imports"><span class="nav-number">1.2.20.</span> <span class="nav-text">2.20 Modern Python: Python 3 and from __future__ imports</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-20-1-Definition"><span class="nav-number">1.2.20.1.</span> <span class="nav-text">2.20.1 Definition</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-20-2-Pros"><span class="nav-number">1.2.20.2.</span> <span class="nav-text">2.20.2 Pros</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-20-3-Cons"><span class="nav-number">1.2.20.3.</span> <span class="nav-text">2.20.3 Cons</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-20-4-Decision"><span class="nav-number">1.2.20.4.</span> <span class="nav-text">2.20.4 Decision</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#from-future-imports"><span class="nav-number">1.2.20.4.1.</span> <span class="nav-text">from __future__ imports</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#The-six-future-or-past-libraries"><span class="nav-number">1.2.20.4.2.</span> <span class="nav-text">The six, future, or past libraries.</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-21-Type-Annotated-Code"><span class="nav-number">1.2.21.</span> <span class="nav-text">2.21 Type Annotated Code</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-21-1-Definition"><span class="nav-number">1.2.21.1.</span> <span class="nav-text">2.21.1 Definition</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-21-2-Pros"><span class="nav-number">1.2.21.2.</span> <span class="nav-text">2.21.2 Pros</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-21-3-Cons"><span class="nav-number">1.2.21.3.</span> <span class="nav-text">2.21.3 Cons</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-21-4-Decision"><span class="nav-number">1.2.21.4.</span> <span class="nav-text">2.21.4 Decision</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-Python-Style-Rules"><span class="nav-number">1.3.</span> <span class="nav-text">3 Python Style Rules</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-Semicolons"><span class="nav-number">1.3.1.</span> <span class="nav-text">3.1 Semicolons</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-Line-length"><span class="nav-number">1.3.2.</span> <span class="nav-text">3.2 Line length</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-Parentheses"><span class="nav-number">1.3.3.</span> <span class="nav-text">3.3 Parentheses</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-Indentation"><span class="nav-number">1.3.4.</span> <span class="nav-text">3.4 Indentation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-1-Trailing-commas-in-sequences-of-items"><span class="nav-number">1.3.5.</span> <span class="nav-text">3.4.1 Trailing commas in sequences of items?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-Blank-Lines"><span class="nav-number">1.3.6.</span> <span class="nav-text">3.5 Blank Lines</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-6-Whitespace"><span class="nav-number">1.3.7.</span> <span class="nav-text">3.6 Whitespace</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-7-Shebang-Line"><span class="nav-number">1.3.8.</span> <span class="nav-text">3.7 Shebang Line</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-8-Comments-and-Docstrings"><span class="nav-number">1.3.9.</span> <span class="nav-text">3.8 Comments and Docstrings</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-8-1-Docstrings"><span class="nav-number">1.3.9.1.</span> <span class="nav-text">3.8.1 Docstrings</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-8-2-Modules"><span class="nav-number">1.3.9.2.</span> <span class="nav-text">3.8.2 Modules</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-8-3-Functions-and-Methods"><span class="nav-number">1.3.9.3.</span> <span class="nav-text">3.8.3 Functions and Methods</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-8-4-Classes"><span class="nav-number">1.3.9.4.</span> <span class="nav-text">3.8.4 Classes</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-8-5-Block-and-Inline-Comments"><span class="nav-number">1.3.9.5.</span> <span class="nav-text">3.8.5 Block and Inline Comments</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-8-6-Punctuation-Spelling-and-Grammar"><span class="nav-number">1.3.9.6.</span> <span class="nav-text">3.8.6 Punctuation, Spelling and Grammar</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-9-Classes"><span class="nav-number">1.3.10.</span> <span class="nav-text">3.9 Classes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-10-Strings"><span class="nav-number">1.3.11.</span> <span class="nav-text">3.10 Strings</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-11-Files-and-Sockets"><span class="nav-number">1.3.12.</span> <span class="nav-text">3.11 Files and Sockets</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-12-TODO-Comments"><span class="nav-number">1.3.13.</span> <span class="nav-text">3.12 TODO Comments</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-13-Imports-formatting"><span class="nav-number">1.3.14.</span> <span class="nav-text">3.13 Imports formatting</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-14-Statements"><span class="nav-number">1.3.15.</span> <span class="nav-text">3.14 Statements</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-15-Access-Control"><span class="nav-number">1.3.16.</span> <span class="nav-text">3.15 Access Control</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-16-Naming"><span class="nav-number">1.3.17.</span> <span class="nav-text">3.16 Naming</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-16-1-Names-to-Avoid"><span class="nav-number">1.3.17.1.</span> <span class="nav-text">3.16.1 Names to Avoid</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-16-2-Naming-Convention"><span class="nav-number">1.3.17.2.</span> <span class="nav-text">3.16.2 Naming Convention</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-16-3-File-Naming"><span class="nav-number">1.3.17.3.</span> <span class="nav-text">3.16.3 File Naming</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-16-4-Guidelines-derived-from-Guido’s-Recommendations"><span class="nav-number">1.3.17.4.</span> <span class="nav-text">3.16.4 Guidelines derived from Guido’s Recommendations</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-17-Main"><span class="nav-number">1.3.18.</span> <span class="nav-text">3.17 Main</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-18-Function-length"><span class="nav-number">1.3.19.</span> <span class="nav-text">3.18 Function length</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-19-Type-Annotations"><span class="nav-number">1.3.20.</span> <span class="nav-text">3.19 Type Annotations</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-19-1-General-Rules"><span class="nav-number">1.3.20.1.</span> <span class="nav-text">3.19.1 General Rules</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-19-2-Line-Breaking"><span class="nav-number">1.3.20.2.</span> <span class="nav-text">3.19.2 Line Breaking</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-19-3-Forward-Declarations"><span class="nav-number">1.3.20.3.</span> <span class="nav-text">3.19.3 Forward Declarations</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-19-4-Default-Values"><span class="nav-number">1.3.20.4.</span> <span class="nav-text">3.19.4 Default Values</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-19-5-NoneType"><span class="nav-number">1.3.20.5.</span> <span class="nav-text">3.19.5 NoneType</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-19-6-Type-Aliases"><span class="nav-number">1.3.20.6.</span> <span class="nav-text">3.19.6 Type Aliases</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-19-7-Ignoring-Types"><span class="nav-number">1.3.20.7.</span> <span class="nav-text">3.19.7 Ignoring Types</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-19-8-Typing-internal-variables"><span class="nav-number">1.3.20.8.</span> <span class="nav-text">3.19.8 Typing internal variables</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-19-9-Tuples-vs-Lists"><span class="nav-number">1.3.20.9.</span> <span class="nav-text">3.19.9 Tuples vs Lists</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-19-10-TypeVar"><span class="nav-number">1.3.20.10.</span> <span class="nav-text">3.19.10 TypeVar</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-19-11-String-types"><span class="nav-number">1.3.20.11.</span> <span class="nav-text">3.19.11 String types</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-19-12-Imports-For-Typing"><span class="nav-number">1.3.20.12.</span> <span class="nav-text">3.19.12 Imports For Typing</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-19-13-Conditional-Imports"><span class="nav-number">1.3.20.13.</span> <span class="nav-text">3.19.13 Conditional Imports</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-19-14-Circular-Dependencies"><span class="nav-number">1.3.20.14.</span> <span class="nav-text">3.19.14 Circular Dependencies</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-19-15-Generics"><span class="nav-number">1.3.20.15.</span> <span class="nav-text">3.19.15 Generics</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-Parting-Words"><span class="nav-number">1.4.</span> <span class="nav-text">4 Parting Words</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="heart">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Joseph</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">站点总字数：</span>
    
    <span title="站点总字数">313k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    
    <span title="站点阅读时长">4:45</span>
  
</div>









        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="总访客量">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="总访问量">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>














  
    
    
  
  <script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script>













  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=6.7.0"></script>

  <script src="/js/src/motion.js?v=6.7.0"></script>



  
  


  <script src="/js/src/affix.js?v=6.7.0"></script>

  <script src="/js/src/schemes/pisces.js?v=6.7.0"></script>



  
  <script src="/js/src/scrollspy.js?v=6.7.0"></script>
<script src="/js/src/post-details.js?v=6.7.0"></script>



  


  <script src="/js/src/bootstrap.js?v=6.7.0"></script>



  
  

<script src="//cdn1.lncld.net/static/js/3.11.1/av-min.js"></script>



<script src="//unpkg.com/valine/dist/Valine.min.js"></script>

<script>
  var GUEST = ['nick', 'mail', 'link'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#comments',
    verify: false,
    notify: true,
    appId: 'O9aoAtFO2Mk0VrPqbyHMHwah-gzGzoHsz',
    appKey: '1bF6m0SPiN3sk9TaGxPELdjY',
    placeholder: 'Just go go',
    avatar: 'mm',
    meta: guest,
    pageSize: '10' || 10,
    visitor: false
  });
</script>




  


  

  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  
  

  
  

  


  

  

  

  

  

  

  
  <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 700;
      line-height: 20px;
      color: #333;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      background-color: #eee;
      background-image: linear-gradient(#fcfcfc, #eee);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
      user-select: none;
      outline: 0;
    }

    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      right: 4px;
      top: 8px;
    }

    .highlight-wrap:hover .copy-btn,
    .highlight-wrap .copy-btn:focus {
      opacity: 1
    }

    .highlight-wrap {
      position: relative;
    }
  </style>
  <script>
    $('.highlight').each(function(i, e) {
      var $wrap = $('<div>').addClass('highlight-wrap');
      $(e).after($wrap);
      $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function(e) {
        var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
          return $(e).text();
        }).toArray().join('\n');
        var ta = document.createElement('textarea');
        var range = document.createRange(); //For Chrome
        var sel = window.getSelection(); //For Chrome
        var yPosition = window.pageYOffset || document.documentElement.scrollTop;
        ta.style.top = yPosition + 'px'; //Prevent page scroll
        ta.style.position = 'absolute';
        ta.style.opacity = '0';
        ta.value = code;
        ta.textContent = code; //For FireFox
        ta.contentEditable = true;
        ta.readOnly = false;
        document.body.appendChild(ta);
        range.selectNode(ta);
        sel.removeAllRanges();
        sel.addRange(range);
        ta.setSelectionRange(0, code.length);
        var result = document.execCommand('copy');
        
          if (result) $(this).text('复制成功');
          else $(this).text('复制失败');
        
        ta.blur(); //For iOS
        $(this).blur();
      })).on('mouseleave', function(e) {
        var $b = $(this).find('.copy-btn');
        setTimeout(function() {
          $b.text('复制');
        }, 300);
      }).append(e);
    })
  </script>


  

</body>
</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/clicklove.js"></script>