<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Hugo 0.82.0" />

  <title> Vim Note |  imlauzh</title>
  <meta name="description" content="A website built by Joseph Lau and host by Github pages.">
  <link rel="stylesheet" href="/blog/css/index.css">
  <link rel="stylesheet" href="/blog/css/classes.css">
  <link rel="canonical" href="/blog/posts/vim-note/">
  <link rel="alternate" type="application/rss+xml" href="" title="imlauzh">
  
  
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" rel="stylesheet">
  <link 
    rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" 
    integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" 
    crossorigin="anonymous">
  </link>
  <script 
    defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" 
    integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" 
    crossorigin="anonymous">
  </script>
  <script 
    defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" 
    integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" 
    crossorigin="anonymous" 
    onload="renderMathInElement(document.body);">
  </script>
</head>

<body>
  <header class="menus">
  

  <nav >
    
    <a href="/blog/"> Home</a>
    
    <a href="/blog/categories/"> Categories</a>
    
    <a href="/blog/tags/"> Tags</a>
    
    <a href="/blog/about/"> About</a>
    
    <a href="/blog/index.xml"> Subscribe</a>
    
  </nav>

  <nav class="fontawesome">
    
    <a href="https://github.com/imlauzh" target="_blank">
        <i title="GitHub" class="fab fa-github"></i>
    </a>
    
    
    <a href="/blog/index.xml" target="_blank">
        <i title="RSS" class="fas fa-rss"></i>
    </a>
    
  </nav>
  
  
  <div class="hidden description">A website built by Joseph Lau and host by Github pages.</div>
  
</header>

<article id="article">
  <header>
  

    <h1 style="text-align: center;" >Vim Note</h1>
    <div class="post-meta">
    
      <time datetime="2018-03-21T13:42:00Z">March 21, 2018</time> &nbsp; 
    

     &nbsp;

    
    
      <i class="far fa-eye"></i>
      <span id="/blog/posts/vim-note/" class="leancloud_visitors" data-flag-title="Vim Note">
          <span class="leancloud-visitors-count">  </span>
      </span> &nbsp;
    
    

    
      <i class="far fa-clock"></i>
      
      
      

      
        7 min
      
      59 s
      &nbsp;
    
    </div>
  </header>

  <h2 id="vim使用技巧">Vim使用技巧</h2>
<h3 id="批量删除内容">批量删除内容</h3>
<ul>
<li>全部删除</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">## 进入文章末尾</span>
G   <span style="color:#75715e">##注意大写</span>
:1,:d  <span style="color:#75715e">## 删除全部内容</span>
</code></pre></div><ul>
<li>删除部分内容</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">## 定位到要删除的文档末尾</span>
200G
:9,:d   <span style="color:#75715e">##删除9-200之间的内容</span>
</code></pre></div><h3 id="复制粘贴">复制粘贴</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#75715e"># 复制当前行</span>
yy
<span style="color:#75715e"># 在当前行粘贴</span>
p
</code></pre></div><h3 id="查找替换">查找替换</h3>
<p>在normal模式下按下<code>/</code>即可进入查找模式，输入要查找的字符串并按下回车。 Vim会跳转到第一个匹配。按下<code>n</code>查找下一个，按下<code>N</code>查找上一个。</p>
<p>Vim查找支持正则表达式，例如<code>/vim$</code>匹配行尾的<code>&quot;vim&quot;</code>。 需要查找特殊字符需要转义，例如<code>/vim\$</code>匹配<code>&quot;vim$&quot;</code>。</p>
<blockquote>
<p>注意查找回车应当用<code>\n</code>，而替换为回车应当用<code>\r</code>（相当于<code>&lt;CR&gt;</code>）。</p>
</blockquote>
<h3 id="查找当前单词">查找当前单词</h3>
<p>在normal模式下按下<code>*</code>即可查找光标所在单词（word）， 要求每次出现的前后为空白字符或标点符号。例如当前为<code>foo</code>， 可以匹配<code>foo bar</code>中的<code>foo</code>，但不可匹配<code>foobar</code>中的<code>foo</code>。 这在查找函数名、变量名时非常有用。</p>
<p>按下<code>g*</code>即可查找光标所在单词的字符序列，每次出现前后字符无要求。 即<code>foo bar</code>和<code>foobar</code>中的<code>foo</code>均可被匹配到。</p>
<p><code>:s</code>（substitute）命令用来查找和替换字符串。语法如下：</p>
<pre><code>:{作用范围}s/{目标}/{替换}/{替换标志}
</code></pre><p>例如<code>:%s/foo/bar/g</code>会在全局范围(<code>%</code>)查找<code>foo</code>并替换为<code>bar</code>，所有出现都会被替换（<code>g</code>）。</p>
<h3 id="作用范围">作用范围</h3>
<p>作用范围分为当前行、全文、选区等等。</p>
<p>当前行：</p>
<pre><code>:s/foo/bar/g
</code></pre><p>全文：</p>
<pre><code>:%s/foo/bar/g
</code></pre><p>选区，在Visual模式下选择区域后输入<code>:</code>，Vim即可自动补全为 <code>:'&lt;,'&gt;</code>。</p>
<pre><code>:'&lt;,'&gt;s/foo/bar/g
</code></pre><p>2-11行：</p>
<pre><code>:5,12s/foo/bar/g
</code></pre><p>当前行<code>.</code>与接下来两行<code>+2</code>：</p>
<pre><code>:.,+2s/foo/bar/g
</code></pre><h3 id="替换标志">替换标志</h3>
<p>上文中命令结尾的<code>g</code>即是替换标志之一，表示全局<code>global</code>替换（即替换目标的所有出现）。 还有很多其他有用的替换标志：</p>
<p>空替换标志表示只替换从光标位置开始，目标的第一次出现：</p>
<pre><code>:%s/foo/bar
</code></pre><p><code>i</code>表示大小写不敏感查找，<code>I</code>表示大小写敏感：</p>
<pre><code>:%s/foo/bar/i
# 等效于模式中的\c（不敏感）或\C（敏感）
:%s/foo\c/bar
</code></pre><p><code>c</code>表示需要确认，例如全局查找<code>&quot;foo&quot;</code>替换为<code>&quot;bar&quot;</code>并且需要确认：</p>
<pre><code>:%s/foo/bar/gc
</code></pre><p>回车后Vim会将光标移动到每一次<code>&quot;foo&quot;</code>出现的位置，并提示</p>
<pre><code>replace with bar (y/n/a/q/l/^E/^Y)?
</code></pre><p>按下<code>y</code>表示替换，<code>n</code>表示不替换，<code>a</code>表示替换所有，<code>q</code>表示退出查找模式， <code>l</code>表示替换当前位置并退出。<code>^E</code>与<code>^Y</code>是光标移动快捷键，参考： <a href="https://harttle.land/2015/11/07/vim-cursor.html">Vim中如何快速进行光标移动</a>。</p>
<h3 id="高亮设置">高亮设置</h3>
<h4 id="高亮颜色设置">高亮颜色设置</h4>
<p>如果你像我一样觉得高亮的颜色不太舒服，可以在 <code>~/.vimrc</code> 中进行设置：</p>
<pre><code>highlight Search ctermbg=yellow ctermfg=black 
highlight IncSearch ctermbg=black ctermfg=yellow 
highlight MatchParen cterm=underline ctermbg=NONE ctermfg=NONE
</code></pre><p>上述配置指定 Search 结果的前景色（foreground）为黑色，背景色（background）为灰色； 渐进搜索的前景色为黑色，背景色为黄色；光标处的字符加下划线。</p>
<blockquote>
<p>更多的CTERM颜色可以查阅：<a href="http://vim.wikia.com/wiki/Xterm256_color_names_for_console_Vim">http://vim.wikia.com/wiki/Xterm256_color_names_for_console_Vim</a></p>
</blockquote>
<h4 id="禁用启用高亮">禁用/启用高亮</h4>
<p>有木有觉得每次查找替换后 Vim 仍然高亮着搜索结果？ 可以手动让它停止高亮，在normal模式下输入：</p>
<pre><code>:nohighlight
# 等效于
:nohl
</code></pre><p>其实上述命令禁用了所有高亮，只禁用搜索高亮的命令是<code>:set nohlsearch</code>。 下次搜索时需要<code>:set hlsearch</code>再次启动搜索高亮。</p>
<h4 id="延时禁用">延时禁用</h4>
<p>怎么能够让Vim查找/替换后一段时间自动取消高亮，发生查找时自动开启呢？</p>
<pre><code>&quot; 当光标一段时间保持不动了，就禁用高亮
autocmd cursorhold * set nohlsearch
&quot; 当输入查找命令时，再启用高亮
noremap n :set hlsearch&lt;cr&gt;n
noremap N :set hlsearch&lt;cr&gt;N
noremap / :set hlsearch&lt;cr&gt;/
noremap ? :set hlsearch&lt;cr&gt;?
noremap * *:set hlsearch&lt;cr&gt;
</code></pre><blockquote>
<p>将上述配置粘贴到<code>~/.vimrc</code>，重新打开vim即可生效。</p>
</blockquote>
<h4 id="一键禁用">一键禁用</h4>
<p>如果延时禁用搜索高亮仍然不够舒服，可以设置快捷键来一键禁用/开启搜索高亮：</p>
<pre><code>noremap n :set hlsearch&lt;cr&gt;n
noremap N :set hlsearch&lt;cr&gt;N
noremap / :set hlsearch&lt;cr&gt;/
noremap ? :set hlsearch&lt;cr&gt;?
noremap * *:set hlsearch&lt;cr&gt;

nnoremap &lt;c-h&gt; :call DisableHighlight()&lt;cr&gt;
function! DisableHighlight()
    set nohlsearch
endfunc
</code></pre><p>希望关闭高亮时只需要按下 <code>Ctrl+H</code>，当发生下次搜索时又会自动启用。</p>
<h3 id="大小写">大小写</h3>
<h4 id="大小写敏感查找">大小写敏感查找</h4>
<p>在查找模式中加入<code>\c</code>表示大小写不敏感查找，<code>\C</code>表示大小写敏感查找。例如：</p>
<pre><code>/foo\c
</code></pre><p>将会查找所有的<code>&quot;foo&quot;</code>,<code>&quot;FOO&quot;</code>,<code>&quot;Foo&quot;</code>等字符串。</p>
<h4 id="大小写敏感配置">大小写敏感配置</h4>
<p>Vim 默认采用大小写敏感的查找，为了方便我们常常将其配置为大小写不敏感：</p>
<pre><code>&quot; 设置默认进行大小写不敏感查找
set ignorecase
&quot; 如果有一个大写字母，则切换到大小写敏感查找
set smartcase 
</code></pre><blockquote>
<p>将上述设置粘贴到你的<code>~/.vimrc</code>，重新打开Vim即可生效。</p>
</blockquote>


  
  <footer>
    <hr>
    
    <time datetime="2019-01-30T04:11:22Z">
      update @ January 30, 2019
    </time>
    <p></p>
    
    <div class="post-tags">
    
      <i class="fas fa-tags"></i>
      
        <a href="/blog/tags/vim">Vim</a>
        &nbsp;
      
    
    </div>
  </footer>
  

  


  <div class="comments">



  <div class="comments-item" >
    
    
    
    <div id="vcomments"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <script type="text/javascript">
      new Valine({
          el: '#vcomments',
          highlight: false,
          lang: "en",
          appId: "O9aoAtFO2Mk0VrPqbyHMHwah-gzGzoHsz",
          appKey: "1bF6m0SPiN3sk9TaGxPELdjY",
          placeholder: "Say Something......",
          requiredFields: ["nick","mail"],
          avatar: "robohash",
          visitor:  true ,
          recordIP: true
      });
    </script>
    <script>
      if(window.location.hash){
          var checkExist = setInterval(function() {
             if ($(window.location.hash).length) {
                $('html, body, article').animate({scrollTop: $(window.location.hash).offset().top-90}, 1000);
                clearInterval(checkExist);
             }
          }, 100);
      }
    </script>
  </div>

</div>

</article>



  
  
  
</body>
<div class="foot">
  
  
    &copy; 2017 - 2021 &#183; 
    <a href="/">imlauzh</a> · Theme <a href="https://github.com/RainerChiang/simpleness">Simpleness</a> Powered by <a href="https://gohugo.io/">Hugo</a> &#183;
    <a href="#"><i class="fas fa-chevron-up"></i></a>
  

  
</div>

<script src="/blog/js/lazyload.min.js"></script>
<script>
  var lazyImage = new LazyLoad({
    container: document.getElementById('article')
  });
</script>


</html>
