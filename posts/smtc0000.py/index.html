<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Hugo 0.81.0" />

  <title> SMTC 0000.py |  imlauzh</title>
  <meta name="description" content="A website built by Joseph Lau and host by Github pages.">
  <link rel="stylesheet" href="/blog/css/index.css">
  <link rel="stylesheet" href="/blog/css/classes.css">
  <link rel="canonical" href="/blog/posts/smtc0000.py/">
  <link rel="alternate" type="application/rss+xml" href="" title="imlauzh">
  
  
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" rel="stylesheet">
  <link 
    rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" 
    integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" 
    crossorigin="anonymous">
  </link>
  <script 
    defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" 
    integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" 
    crossorigin="anonymous">
  </script>
  <script 
    defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" 
    integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" 
    crossorigin="anonymous" 
    onload="renderMathInElement(document.body);">
  </script>
</head>

<body>
  <header class="menus">
  

  <nav >
    
    <a href="/blog/"> Home</a>
    
    <a href="/blog/categories/"> Categories</a>
    
    <a href="/blog/tags/"> Tags</a>
    
    <a href="/blog/about/"> About</a>
    
    <a href="/blog/index.xml"> Subscribe</a>
    
  </nav>

  <nav class="fontawesome">
    
    <a href="https://github.com/imlauzh" target="_blank">
        <i title="GitHub" class="fab fa-github"></i>
    </a>
    
    
    <a href="/blog/index.xml" target="_blank">
        <i title="RSS" class="fas fa-rss"></i>
    </a>
    
  </nav>
  
  
  <div class="hidden description">A website built by Joseph Lau and host by Github pages.</div>
  
</header>

<article id="article">
  <header>
  
    <i class="fas fa-folder"></i>
    
    <a href="/blog/categories/smtc">SMTC</a>
    &nbsp;
    
  

    <h1 style="text-align: center;" >SMTC 0000.py</h1>
    <div class="post-meta">
    
      <time datetime="2019-01-29T21:09:32Z">January 29, 2019</time> &nbsp; 
    

     &nbsp;

    
    
      <i class="far fa-eye"></i>
      <span id="/blog/posts/smtc0000.py/" class="leancloud_visitors" data-flag-title="SMTC 0000.py">
          <span class="leancloud-visitors-count">  </span>
      </span> &nbsp;
    
    

    
      <i class="far fa-clock"></i>
      
      
      

      
        2 min
      
      19 s
      &nbsp;
    
    </div>
  </header>

  <p><a href="/note/show-me-the-code/">show-me-the-code 完整题目</a></p>
<h2 id="题目">题目</h2>
<p>第 0000 题：将你的 QQ 头像（或者微博头像）右上角加上红色的数字，类似于微信未读信息数量那种提示效果。 类似于图中效果：</p>
<p><img src="https://camo.githubusercontent.com/d518d3929e4054ce2f9183b23e52908da7e5632d/687474703a2f2f692e696d6775722e636f6d2f736732646b75592e706e673f31" alt="头像"></p>
<h2 id="思路">思路</h2>
<p><a href="https://pillow.readthedocs.io/en/4.0.x/reference/ImageDraw.html">利用Pillow模块中提供的ImageDraw</a>在图片上画图形或者文字。</p>
<p>首先打开图片，使用<code>Image.open()</code>，在这之前需要导入<code>pillow</code>模块库，<code>import PIL</code>。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Creates an object that can be used to draw in the given image.</span>
<span style="color:#75715e"># PIL.ImageDraw.Draw(im, mode=None)</span>
imgDraw <span style="color:#f92672">=</span> ImageDraw<span style="color:#f92672">.</span>Draw(image)
</code></pre></div><p>设置填充字体以及颜色，获取图片大小，好设置填充位置</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># 颜色</span>
fillColor <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;#ff0000&#39;</span>
<span style="color:#75715e"># 大小</span>
width, height <span style="color:#f92672">=</span> image<span style="color:#f92672">.</span>size
<span style="color:#75715e"># 字体</span>
myFont <span style="color:#f92672">=</span> ImageFont<span style="color:#f92672">.</span>truetype(<span style="color:#e6db74">&#39;/Library/Fonts/Tahoma.ttf&#39;</span>, size<span style="color:#f92672">=</span>width<span style="color:#f92672">//</span><span style="color:#ae81ff">10</span>)
</code></pre></div><p>接着<code>imgDraw.text((width-100, 0), 'hello', *fill*=fillColor, *font*=myFont)</code>，填充数字或者单词。</p>
<p>保存图片完成。</p>
<h2 id="solution">Solution</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># -*- coding:utf-8 -*-</span>
<span style="color:#f92672">import</span> PIL
<span style="color:#f92672">from</span> PIL <span style="color:#f92672">import</span> Image
<span style="color:#f92672">from</span> PIL <span style="color:#f92672">import</span> ImageDraw
<span style="color:#f92672">from</span> PIL <span style="color:#f92672">import</span> ImageFont


<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add_num</span>(imgName):
    <span style="color:#75715e"># 打开图片</span>
    image <span style="color:#f92672">=</span> Image<span style="color:#f92672">.</span>open(imgName)
    <span style="color:#75715e"># Creates an object that can be used to draw in the given image.</span>
    <span style="color:#75715e"># PIL.ImageDraw.Draw(im, mode=None)</span>
    imgDraw <span style="color:#f92672">=</span> ImageDraw<span style="color:#f92672">.</span>Draw(image)
    <span style="color:#75715e"># 颜色</span>
    fillColor <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;#ff0000&#39;</span>
    <span style="color:#75715e"># 大小</span>
    width, height <span style="color:#f92672">=</span> image<span style="color:#f92672">.</span>size
    <span style="color:#75715e"># 字体</span>
    <span style="color:#75715e"># 使用中文字体时才可以渲染中文</span>
    myFont <span style="color:#f92672">=</span> ImageFont<span style="color:#f92672">.</span>truetype(
        <span style="color:#e6db74">&#39;/Library/Fonts/Songti.ttc&#39;</span>, size<span style="color:#f92672">=</span>width<span style="color:#f92672">//</span><span style="color:#ae81ff">10</span>)
    imgDraw<span style="color:#f92672">.</span>text((width<span style="color:#f92672">-</span><span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">0</span>), <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;你好&#39;</span>, fill<span style="color:#f92672">=</span>fillColor, font<span style="color:#f92672">=</span>myFont)
    <span style="color:#75715e"># image.show()</span>
    image<span style="color:#f92672">.</span>save(<span style="color:#e6db74">&#39;/Users/lau/Documents/Coding/Python/SMTC/0000/result.jpg&#39;</span>)

    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>


<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
    add_num(<span style="color:#e6db74">&#39;/Users/lau/Documents/Coding/Python/SMTC/0000/0000.jpeg&#39;</span>)
</code></pre></div><p><strong>原图</strong>：</p>
<p><img src="https://i.loli.net/2019/04/30/5cc831cf1b5f7.jpg" alt="0000"></p>
<p><strong>效果图</strong>：</p>
<p><img src="https://i.loli.net/2019/04/30/5cc831d7cc127.jpg" alt="result"></p>
<h2 id="qa">Q&amp;A</h2>
<ol>
<li>
<p>ModuleNotFoundError: No module named &lsquo;PIL’</p>
<p>由于pillow模块未安装，所以需要使用pip(3)安装</p>
<p><code>pip3 install Pillow</code></p>
</li>
<li>
<p><code>/usr/local/bin/python3 -m pip install -U pylint --user</code></p>
<p><a href="https://www.ibm.com/developerworks/cn/linux/l-cn-pylint/index.html">Pylint 是什么</a></p>
</li>
<li>
<p>ImageDraw</p>
<p><a href="https://pillow.readthedocs.io/en/4.0.x/reference/ImageDraw.html">官方文档</a></p>
</li>
<li>
<p>找不到图片</p>
<p>相对路径找不到时，试试绝对路径。</p>
</li>
<li>
<p>如果要加汉字呢？编码问题怎么解决？</p>
<ul>
<li>换个中文字体</li>
<li>指定utf-8<strong>编码</strong></li>
</ul>
</li>
</ol>


  
  <footer>
    <hr>
    
    <time datetime="2019-01-30T11:17:32Z">
      update @ January 30, 2019
    </time>
    <p></p>
    
    <div class="post-tags">
    
    </div>
  </footer>
  

  


  <div class="comments">



  <div class="comments-item" >
    
    
    
    <div id="vcomments"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <script type="text/javascript">
      new Valine({
          el: '#vcomments',
          highlight: false,
          lang: "en",
          appId: "O9aoAtFO2Mk0VrPqbyHMHwah-gzGzoHsz",
          appKey: "1bF6m0SPiN3sk9TaGxPELdjY",
          placeholder: "Say Something......",
          requiredFields: ["nick","mail"],
          avatar: "robohash",
          visitor:  true ,
          recordIP: true
      });
    </script>
    <script>
      if(window.location.hash){
          var checkExist = setInterval(function() {
             if ($(window.location.hash).length) {
                $('html, body, article').animate({scrollTop: $(window.location.hash).offset().top-90}, 1000);
                clearInterval(checkExist);
             }
          }, 100);
      }
    </script>
  </div>

</div>

</article>



  
  
  
</body>
<div class="foot">
  
  
    &copy; 2017 - 2021 &#183; 
    <a href="/">imlauzh</a> · Theme <a href="https://github.com/RainerChiang/simpleness">Simpleness</a> Powered by <a href="https://gohugo.io/">Hugo</a> &#183;
    <a href="#"><i class="fas fa-chevron-up"></i></a>
  

  
</div>

<script src="/blog/js/lazyload.min.js"></script>
<script>
  var lazyImage = new LazyLoad({
    container: document.getElementById('article')
  });
</script>


</html>
